<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1.0, user-scalable=yes, maximum-scale=5.0"
    />
    <meta
      name="description"
      content="Headteacher Dashboard - {{ school_info.school_name or 'Hillview School' }} Management System"
    />
    <meta name="format-detection" content="telephone=no" />
    <meta name="mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="theme-color" content="#b58900" />

    <title>
      Headteacher Dashboard - {{ school_info.school_name or 'Hillview School
      Management System' }}
    </title>

    <!-- Preconnect for performance -->
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link rel="preconnect" href="https://cdnjs.cloudflare.com" />

    <!-- Professional Solar Theme Fonts -->
    <link
      href="https://fonts.googleapis.com/css2?family=Source+Sans+Pro:wght@300;400;600;700&family=Fira+Code:wght@400;500&display=swap"
      rel="stylesheet"
    />

    <!-- Icons -->
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
      integrity="sha512-iecdLmaskl7CVkqkXNQ/ZH/XLlvWZOJyj7Yy7tcenmpD1ypASozpmT/E0iPtmFIB46ZmdtAc9eNBvH0H/ZpiBw=="
      crossorigin="anonymous"
      referrerpolicy="no-referrer"
    />

    <!-- Chart.js -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

    <!-- jsPDF for PDF export -->
    <script src="https://unpkg.com/jspdf@latest/dist/jspdf.umd.min.js"></script>

    <!-- html2canvas for chart capture -->
    <script src="https://html2canvas.hertzen.com/dist/html2canvas.min.js"></script>

    <!-- Professional Premium Solar Theme Styles -->
    <style>
      /* Solar Theme Color Palette - Premium Edition */
      :root {
        --solar-base03: #002b36;
        --solar-base02: #073642;
        --solar-base01: #586e75;
        --solar-base00: #657b83;
        --solar-base0: #839496;
        --solar-base1: #93a1a1;
        --solar-base2: #eee8d5;
        --solar-base3: #fdf6e3;
        --solar-yellow: #b58900;
        --solar-orange: #cb4b16;
        --solar-red: #dc322f;
        --solar-magenta: #d33682;
        --solar-violet: #6c71c4;
        --solar-blue: #268bd2;
        --solar-cyan: #2aa198;
        --solar-green: #859900;

        /* Premium Shadows and Effects */
        --shadow-xs: 0 1px 2px 0 rgba(0, 43, 54, 0.03);
        --shadow-sm: 0 1px 3px 0 rgba(0, 43, 54, 0.1),
          0 1px 2px 0 rgba(0, 43, 54, 0.06);
        --shadow-md: 0 4px 6px -1px rgba(0, 43, 54, 0.1),
          0 2px 4px -1px rgba(0, 43, 54, 0.06);
        --shadow-lg: 0 10px 15px -3px rgba(0, 43, 54, 0.1),
          0 4px 6px -2px rgba(0, 43, 54, 0.05);
        --shadow-xl: 0 20px 25px -5px rgba(0, 43, 54, 0.1),
          0 10px 10px -5px rgba(0, 43, 54, 0.04);
        --shadow-2xl: 0 25px 50px -12px rgba(0, 43, 54, 0.25);
        --shadow-inner: inset 0 2px 4px 0 rgba(0, 43, 54, 0.06);

        /* Premium Gradients */
        --gradient-primary: linear-gradient(
          135deg,
          var(--solar-yellow) 0%,
          var(--solar-orange) 100%
        );
        --gradient-secondary: linear-gradient(
          135deg,
          var(--solar-blue) 0%,
          var(--solar-violet) 100%
        );
        --gradient-success: linear-gradient(
          135deg,
          var(--solar-green) 0%,
          var(--solar-cyan) 100%
        );
        --gradient-info: linear-gradient(
          135deg,
          var(--solar-cyan) 0%,
          var(--solar-blue) 100%
        );
        --gradient-warning: linear-gradient(
          135deg,
          var(--solar-orange) 0%,
          var(--solar-red) 100%
        );
        --gradient-danger: linear-gradient(
          135deg,
          var(--solar-red) 0%,
          var(--solar-magenta) 100%
        );
        --gradient-surface: linear-gradient(
          145deg,
          var(--solar-base3) 0%,
          var(--solar-base2) 100%
        );
        --gradient-dark: linear-gradient(
          145deg,
          var(--solar-base02) 0%,
          var(--solar-base03) 100%
        );

        /* Professional Spacing */
        --space-xs: 0.25rem;
        --space-sm: 0.5rem;
        --space-md: 1rem;
        --space-lg: 1.5rem;
        --space-xl: 2rem;
        --space-2xl: 3rem;

        /* Premium Border Radius */
        --radius-sm: 6px;
        --radius-md: 8px;
        --radius-lg: 12px;
        --radius-xl: 16px;
        --radius-2xl: 20px;
        --radius-full: 9999px;

        /* Typography Scale */
        --text-xs: 0.75rem;
        --text-sm: 0.875rem;
        --text-base: 1rem;
        --text-lg: 1.125rem;
        --text-xl: 1.25rem;
        --text-2xl: 1.5rem;
        --text-3xl: 1.875rem;
        --text-4xl: 2.25rem;

        /* Animation Timing */
        --transition-fast: 150ms ease-out;
        --transition-normal: 250ms ease-out;
        --transition-slow: 350ms ease-out;
      }

      /* Reset and Base Styles */
      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }

      *::before,
      *::after {
        box-sizing: border-box;
      }

      html {
        scroll-behavior: smooth;
        font-size: 16px;
      }

      body {
        font-family: "Source Sans Pro", -apple-system, BlinkMacSystemFont,
          "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
        background: var(--solar-base3);
        color: var(--solar-base01);
        line-height: 1.6;
        min-height: 100vh;
        overflow-x: hidden;
        font-weight: 400;
        font-size: var(--text-base);
        -webkit-font-smoothing: antialiased;
        -moz-osx-font-smoothing: grayscale;
      }

      /* Professional Navigation Bar */
      .navbar {
        background: var(--gradient-primary);
        box-shadow: var(--shadow-lg);
        padding: 0;
        position: sticky;
        top: 0;
        z-index: 1000;
        border-bottom: 3px solid var(--solar-orange);
        backdrop-filter: blur(10px);
      }

      .navbar-container {
        max-width: 1400px;
        margin: 0 auto;
        display: flex;
        align-items: center;
        justify-content: space-between;
        padding: 0 var(--space-xl);
        flex-wrap: wrap;
        min-height: 70px;
      }

      .navbar-brand {
        color: var(--solar-base3);
        text-decoration: none;
        font-size: var(--text-2xl);
        font-weight: 700;
        display: flex;
        align-items: center;
        gap: var(--space-md);
        padding: var(--space-md) 0;
        text-shadow: 0 2px 4px rgba(0, 43, 54, 0.3);
        transition: var(--transition-normal);
      }

      .navbar-brand:hover {
        color: var(--solar-base2);
        transform: translateY(-1px);
        text-shadow: 0 4px 8px rgba(0, 43, 54, 0.4);
      }

      .navbar-brand i {
        font-size: var(--text-3xl);
        filter: drop-shadow(0 2px 4px rgba(0, 43, 54, 0.3));
      }

      .navbar-nav {
        display: flex;
        list-style: none;
        gap: var(--space-sm);
        align-items: center;
        flex-wrap: wrap;
      }

      .nav-link {
        color: var(--solar-base2);
        text-decoration: none;
        padding: var(--space-md) var(--space-lg);
        border-radius: var(--radius-md);
        font-weight: 500;
        display: flex;
        align-items: center;
        gap: var(--space-sm);
        transition: var(--transition-normal);
        font-size: var(--text-sm);
        border: 2px solid transparent;
        position: relative;
        overflow: hidden;
      }

      .nav-link::before {
        content: "";
        position: absolute;
        top: 0;
        left: -100%;
        width: 100%;
        height: 100%;
        background: rgba(253, 246, 227, 0.1);
        transition: var(--transition-normal);
        z-index: -1;
      }

      .nav-link:hover::before {
        left: 0;
      }

      .nav-link:hover {
        background: rgba(253, 246, 227, 0.15);
        color: var(--solar-base3);
        transform: translateY(-2px);
        border-color: rgba(253, 246, 227, 0.3);
        box-shadow: var(--shadow-md);
      }

      .nav-link.active {
        background: var(--solar-base3);
        color: var(--solar-yellow);
        font-weight: 600;
        box-shadow: var(--shadow-sm);
      }

      .nav-link i {
        font-size: var(--text-lg);
        width: 20px;
        text-align: center;
      }

      /* Premium Dashboard Container */
      .dashboard-container {
        max-width: 1400px;
        margin: 0 auto;
        padding: var(--space-xl);
        background: var(--solar-base3);
        min-height: calc(100vh - 70px);
      }

      /* Elegant Page Header */
      .page-header {
        background: var(--gradient-surface);
        border-radius: var(--radius-xl);
        padding: var(--space-2xl);
        margin-bottom: var(--space-xl);
        box-shadow: var(--shadow-lg);
        border: 1px solid var(--solar-base2);
        display: flex;
        justify-content: space-between;
        align-items: center;
        flex-wrap: wrap;
        gap: var(--space-lg);
        position: relative;
        overflow: hidden;
      }

      .page-header::before {
        content: "";
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        height: 4px;
        background: var(--gradient-primary);
      }

      .page-title h1 {
        color: var(--solar-base02);
        font-size: var(--text-4xl);
        font-weight: 700;
        margin-bottom: var(--space-sm);
        display: flex;
        align-items: center;
        gap: var(--space-lg);
        text-shadow: 0 1px 2px rgba(0, 43, 54, 0.1);
      }

      .page-title h1 i {
        font-size: var(--text-3xl);
        color: var(--solar-yellow);
        filter: drop-shadow(0 2px 4px rgba(181, 137, 0, 0.3));
      }

      .page-title p {
        color: var(--solar-base01);
        font-size: var(--text-lg);
        font-weight: 400;
        margin: 0;
      }

      .page-actions {
        display: flex;
        gap: var(--space-lg);
        flex-wrap: wrap;
        align-items: center;
      }

      /* Premium Button System */
      .btn {
        background: var(--gradient-primary);
        color: var(--solar-base3);
        border: none;
        padding: var(--space-md) var(--space-xl);
        border-radius: var(--radius-lg);
        font-weight: 600;
        font-size: var(--text-base);
        cursor: pointer;
        transition: var(--transition-normal);
        text-decoration: none;
        display: inline-flex;
        align-items: center;
        gap: var(--space-sm);
        box-shadow: var(--shadow-md);
        border: 2px solid transparent;
        position: relative;
        overflow: hidden;
        font-family: inherit;
      }

      .btn::before {
        content: "";
        position: absolute;
        top: 0;
        left: -100%;
        width: 100%;
        height: 100%;
        background: linear-gradient(
          135deg,
          rgba(255, 255, 255, 0.1) 0%,
          rgba(255, 255, 255, 0.05) 100%
        );
        transition: var(--transition-normal);
      }

      .btn:hover::before {
        left: 0;
      }

      .btn:hover {
        transform: translateY(-2px);
        box-shadow: var(--shadow-xl);
        border-color: var(--solar-orange);
      }

      .btn:active {
        transform: translateY(0);
        box-shadow: var(--shadow-md);
      }

      .btn-outline {
        background: transparent;
        color: var(--solar-yellow);
        border: 2px solid var(--solar-yellow);
        box-shadow: var(--shadow-sm);
      }

      .btn-outline:hover {
        background: var(--solar-yellow);
        color: var(--solar-base3);
        transform: translateY(-2px);
        box-shadow: var(--shadow-lg);
      }

      .btn-sm {
        padding: var(--space-sm) var(--space-lg);
        font-size: var(--text-sm);
        border-radius: var(--radius-md);
      }

      .btn-lg {
        padding: var(--space-lg) var(--space-2xl);
        font-size: var(--text-lg);
        border-radius: var(--radius-xl);
      }

      .btn-success {
        background: var(--gradient-success);
      }

      .btn-info {
        background: var(--gradient-info);
      }

      .btn-warning {
        background: var(--gradient-warning);
      }

      .btn-danger {
        background: var(--gradient-danger);
      }

      /* Professional Stats Grid */
      .stats-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
        gap: var(--space-xl);
        margin-bottom: var(--space-xl);
      }

      .stat-card {
        background: var(--gradient-surface);
        border-radius: var(--radius-xl);
        padding: var(--space-xl);
        box-shadow: var(--shadow-lg);
        border: 1px solid var(--solar-base2);
        display: flex;
        align-items: center;
        gap: var(--space-lg);
        transition: var(--transition-normal);
        position: relative;
        overflow: hidden;
      }

      .stat-card::before {
        content: "";
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        height: 4px;
        background: var(--gradient-primary);
      }

      .stat-card:hover {
        transform: translateY(-4px);
        box-shadow: var(--shadow-2xl);
      }

      .stat-icon {
        width: 70px;
        height: 70px;
        border-radius: var(--radius-xl);
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: var(--text-2xl);
        color: var(--solar-base3);
        box-shadow: var(--shadow-md);
        position: relative;
        overflow: hidden;
      }

      .stat-icon::before {
        content: "";
        position: absolute;
        top: -50%;
        left: -50%;
        width: 200%;
        height: 200%;
        background: linear-gradient(
          45deg,
          transparent,
          rgba(255, 255, 255, 0.1),
          transparent
        );
        transform: rotate(45deg);
        transition: var(--transition-slow);
        opacity: 0;
      }

      .stat-card:hover .stat-icon::before {
        opacity: 1;
        transform: rotate(45deg) translate(50%, 50%);
      }

      .stat-icon.primary {
        background: var(--gradient-primary);
      }
      .stat-icon.success {
        background: var(--gradient-success);
      }
      .stat-icon.info {
        background: var(--gradient-info);
      }
      .stat-icon.warning {
        background: var(--gradient-warning);
      }
      .stat-icon.danger {
        background: var(--gradient-danger);
      }

      .stat-content {
        flex: 1;
      }

      .stat-number {
        font-size: var(--text-4xl);
        font-weight: 700;
        color: var(--solar-base02);
        margin-bottom: var(--space-xs);
        text-shadow: 0 1px 2px rgba(0, 43, 54, 0.1);
      }

      .stat-label {
        font-size: var(--text-lg);
        color: var(--solar-base01);
        margin-bottom: var(--space-sm);
        font-weight: 500;
      }

      .stat-trend {
        font-size: var(--text-sm);
        color: var(--solar-green);
        font-weight: 500;
        display: flex;
        align-items: center;
        gap: var(--space-xs);
        padding: var(--space-xs) var(--space-sm);
        background: rgba(133, 153, 0, 0.1);
        border-radius: var(--radius-full);
        width: fit-content;
      }

      .stat-trend.negative {
        color: var(--solar-red);
        background: rgba(220, 50, 47, 0.1);
      }

      .stat-trend.neutral {
        color: var(--solar-blue);
        background: rgba(38, 139, 210, 0.1);
      }

      /* Enhanced Section Styling */
      .section {
        background: var(--gradient-surface);
        border-radius: var(--radius-xl);
        padding: var(--space-2xl);
        margin-bottom: var(--space-xl);
        box-shadow: var(--shadow-lg);
        border: 1px solid var(--solar-base2);
        position: relative;
        overflow: hidden;
      }

      .section::before {
        content: "";
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        height: 3px;
        background: var(--gradient-primary);
      }

      .section-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: var(--space-xl);
        padding-bottom: var(--space-lg);
        border-bottom: 2px solid var(--solar-base2);
      }

      .section-header h2,
      .section-header h3 {
        color: var(--solar-base02);
        font-weight: 700;
        display: flex;
        align-items: center;
        gap: var(--space-md);
        margin: 0;
        text-shadow: 0 1px 2px rgba(0, 43, 54, 0.1);
      }

      .section-header h2 {
        font-size: var(--text-3xl);
      }

      .section-header h3 {
        font-size: var(--text-2xl);
      }

      .section-header i {
        color: var(--solar-yellow);
        filter: drop-shadow(0 1px 2px rgba(181, 137, 0, 0.3));
      }

      .section-subtitle {
        color: var(--solar-base00);
        font-size: var(--text-base);
        margin: var(--space-sm) 0 0 0;
        font-weight: 400;
      }

      .section-actions {
        display: flex;
        gap: var(--space-lg);
        flex-wrap: wrap;
        align-items: center;
      }

      /* Premium Charts */
      .charts-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(450px, 1fr));
        gap: var(--space-xl);
      }

      .chart-container {
        background: var(--solar-base3);
        border-radius: var(--radius-lg);
        padding: var(--space-xl);
        box-shadow: var(--shadow-md);
        border: 1px solid var(--solar-base2);
        position: relative;
        overflow: hidden;
      }

      .chart-container::before {
        content: "";
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        height: 2px;
        background: var(--gradient-primary);
      }

      .chart-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: var(--space-lg);
        padding-bottom: var(--space-md);
        border-bottom: 1px solid var(--solar-base2);
      }

      .chart-header h3 {
        color: var(--solar-base02);
        font-weight: 600;
        font-size: var(--text-xl);
        margin: 0;
      }

      .chart-actions {
        display: flex;
        gap: var(--space-sm);
      }

      .chart-content {
        position: relative;
        height: 300px;
      }

      /* Professional Form Controls */
      .form-group {
        margin-bottom: var(--space-lg);
      }

      .form-label {
        display: block;
        margin-bottom: var(--space-sm);
        color: var(--solar-base01);
        font-weight: 500;
        font-size: var(--text-base);
      }

      .form-control,
      select {
        width: 100%;
        padding: var(--space-md);
        border: 2px solid var(--solar-base2);
        border-radius: var(--radius-md);
        background: var(--solar-base3);
        color: var(--solar-base01);
        font-size: var(--text-base);
        transition: var(--transition-normal);
        font-family: inherit;
        box-shadow: var(--shadow-xs);
      }

      .form-control:focus,
      select:focus {
        outline: none;
        border-color: var(--solar-yellow);
        box-shadow: 0 0 0 3px rgba(181, 137, 0, 0.1), var(--shadow-sm);
        transform: translateY(-1px);
      }

      .form-control:hover,
      select:hover {
        border-color: var(--solar-base01);
        box-shadow: var(--shadow-sm);
      }

      /* Filter Panel */
      .filter-panel {
        background: var(--gradient-surface);
        border-radius: var(--radius-lg);
        padding: var(--space-xl);
        margin-bottom: var(--space-xl);
        box-shadow: var(--shadow-md);
        border: 1px solid var(--solar-base2);
        position: relative;
        overflow: hidden;
      }

      .filter-panel::before {
        content: "";
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        height: 3px;
        background: var(--gradient-info);
      }

      .filter-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: var(--space-lg);
        padding-bottom: var(--space-md);
        border-bottom: 1px solid var(--solar-base2);
      }

      .filter-header h3 {
        color: var(--solar-base02);
        font-weight: 600;
        font-size: var(--text-xl);
        margin: 0;
        display: flex;
        align-items: center;
        gap: var(--space-sm);
      }

      .filter-content {
        display: flex;
        flex-direction: column;
        gap: var(--space-lg);
      }

      .filter-row {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
        gap: var(--space-lg);
        align-items: end;
      }

      .filter-group {
        display: flex;
        flex-direction: column;
      }

      /* Professional Tables */
      .table-responsive {
        background: var(--solar-base3);
        border-radius: var(--radius-lg);
        overflow: hidden;
        box-shadow: var(--shadow-md);
        border: 1px solid var(--solar-base2);
        margin-bottom: var(--space-lg);
      }

      .performance-table {
        width: 100%;
        border-collapse: collapse;
        font-size: var(--text-sm);
      }

      .performance-table th {
        background: var(--gradient-primary);
        color: var(--solar-base3);
        padding: var(--space-lg);
        text-align: left;
        font-weight: 600;
        border-bottom: 2px solid var(--solar-orange);
        font-size: var(--text-sm);
        text-transform: uppercase;
        letter-spacing: 0.5px;
      }

      .performance-table td {
        padding: var(--space-lg);
        border-bottom: 1px solid var(--solar-base2);
        color: var(--solar-base01);
        font-size: var(--text-sm);
        vertical-align: middle;
      }

      .performance-table tr:hover {
        background: rgba(181, 137, 0, 0.05);
        transform: scale(1.001);
        transition: var(--transition-fast);
      }

      .performance-table tbody tr {
        transition: var(--transition-fast);
      }

      /* Performance badges */
      .average-badge {
        padding: var(--space-xs) var(--space-md);
        border-radius: var(--radius-full);
        font-weight: 600;
        font-size: var(--text-xs);
        text-transform: uppercase;
        letter-spacing: 0.5px;
        box-shadow: var(--shadow-xs);
      }

      .average-excellent {
        background: var(--solar-green);
        color: var(--solar-base3);
      }

      .average-good {
        background: var(--solar-blue);
        color: var(--solar-base3);
      }

      .average-needs-improvement {
        background: var(--solar-orange);
        color: var(--solar-base3);
      }

      .average-poor {
        background: var(--solar-red);
        color: var(--solar-base3);
      }

      /* Alert System */
      .alert {
        padding: var(--space-lg);
        border-radius: var(--radius-lg);
        margin-bottom: var(--space-lg);
        border-left: 4px solid;
        box-shadow: var(--shadow-sm);
        display: flex;
        align-items: flex-start;
        gap: var(--space-md);
      }

      .alert-success {
        background: rgba(133, 153, 0, 0.1);
        border-left-color: var(--solar-green);
        color: var(--solar-green);
      }

      .alert-info {
        background: rgba(38, 139, 210, 0.1);
        border-left-color: var(--solar-blue);
        color: var(--solar-blue);
      }

      .alert-warning {
        background: rgba(203, 75, 22, 0.1);
        border-left-color: var(--solar-orange);
        color: var(--solar-orange);
      }

      .alert-danger {
        background: rgba(220, 50, 47, 0.1);
        border-left-color: var(--solar-red);
        color: var(--solar-red);
      }

      .alert-icon {
        font-size: var(--text-lg);
        margin-top: 2px;
      }

      .alert-content {
        flex: 1;
      }

      .alert-title {
        font-weight: 600;
        margin-bottom: var(--space-xs);
        color: var(--solar-base02);
      }

      .alert-message {
        color: var(--solar-base01);
        line-height: 1.5;
      }

      /* Pagination */
      .pagination-container {
        display: flex;
        justify-content: space-between;
        align-items: center;
        padding: var(--space-lg);
        background: var(--solar-base3);
        border-top: 1px solid var(--solar-base2);
        border-radius: 0 0 var(--radius-lg) var(--radius-lg);
      }

      .pagination-info {
        color: var(--solar-base01);
        font-size: var(--text-sm);
      }

      .pagination-controls {
        display: flex;
        align-items: center;
        gap: var(--space-md);
      }

      .page-numbers {
        display: flex;
        gap: var(--space-xs);
      }

      .page-number {
        padding: var(--space-sm) var(--space-md);
        border: 1px solid var(--solar-base2);
        background: var(--solar-base3);
        color: var(--solar-base01);
        text-decoration: none;
        border-radius: var(--radius-sm);
        font-size: var(--text-sm);
        transition: var(--transition-fast);
      }

      .page-number:hover {
        background: var(--solar-yellow);
        color: var(--solar-base3);
        border-color: var(--solar-yellow);
      }

      .page-number.active {
        background: var(--solar-yellow);
        color: var(--solar-base3);
        border-color: var(--solar-yellow);
        font-weight: 600;
      }

      /* Loading States */
      .loading {
        text-align: center;
        padding: var(--space-2xl);
        color: var(--solar-base01);
      }

      .loading i {
        font-size: var(--text-2xl);
        color: var(--solar-yellow);
        animation: spin 1s linear infinite;
      }

      @keyframes spin {
        from {
          transform: rotate(0deg);
        }
        to {
          transform: rotate(360deg);
        }
      }

      /* Enhanced Animations */
      @keyframes fadeInUp {
        from {
          opacity: 0;
          transform: translateY(30px);
        }
        to {
          opacity: 1;
          transform: translateY(0);
        }
      }

      @keyframes fadeInLeft {
        from {
          opacity: 0;
          transform: translateX(-30px);
        }
        to {
          opacity: 1;
          transform: translateX(0);
        }
      }

      @keyframes fadeInRight {
        from {
          opacity: 0;
          transform: translateX(30px);
        }
        to {
          opacity: 1;
          transform: translateX(0);
        }
      }

      @keyframes pulse {
        0%,
        100% {
          opacity: 1;
        }
        50% {
          opacity: 0.5;
        }
      }

      .animate-fade-in-up {
        animation: fadeInUp 0.6s ease-out;
      }

      .animate-fade-in-left {
        animation: fadeInLeft 0.6s ease-out;
      }

      .animate-fade-in-right {
        animation: fadeInRight 0.6s ease-out;
      }

      .animate-pulse {
        animation: pulse 2s infinite;
      }

      /* Premium scrollbar */
      ::-webkit-scrollbar {
        width: 10px;
        height: 10px;
      }

      ::-webkit-scrollbar-track {
        background: var(--solar-base2);
        border-radius: var(--radius-sm);
      }

      ::-webkit-scrollbar-thumb {
        background: var(--gradient-primary);
        border-radius: var(--radius-sm);
      }

      ::-webkit-scrollbar-thumb:hover {
        background: var(--gradient-warning);
      }

      ::-webkit-scrollbar-corner {
        background: var(--solar-base2);
      }

      /* Responsive Design */
      @media (max-width: 1200px) {
        .dashboard-container {
          padding: var(--space-lg);
        }

        .stats-grid {
          grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
        }

        .charts-grid {
          grid-template-columns: 1fr;
        }
      }

      @media (max-width: 768px) {
        :root {
          --text-4xl: 2rem;
          --text-3xl: 1.5rem;
          --text-2xl: 1.25rem;
        }

        .navbar-container {
          flex-direction: column;
          padding: var(--space-lg);
          min-height: auto;
        }

        .navbar-nav {
          width: 100%;
          justify-content: center;
          margin-top: var(--space-lg);
          flex-wrap: wrap;
        }

        .dashboard-container {
          padding: var(--space-lg);
        }

        .page-header {
          flex-direction: column;
          text-align: center;
          padding: var(--space-xl);
        }

        .page-actions {
          width: 100%;
          justify-content: center;
        }

        .stats-grid {
          grid-template-columns: 1fr;
          gap: var(--space-lg);
        }

        .filter-row {
          grid-template-columns: 1fr;
        }

        .section {
          padding: var(--space-lg);
        }

        .chart-container {
          padding: var(--space-lg);
        }

        .chart-content {
          height: 250px;
        }

        .performance-table {
          font-size: var(--text-xs);
        }

        .performance-table th,
        .performance-table td {
          padding: var(--space-sm);
        }

        .pagination-container {
          flex-direction: column;
          gap: var(--space-md);
        }
      }

      @media (max-width: 480px) {
        .navbar-nav {
          flex-direction: column;
          width: 100%;
        }

        .nav-link {
          width: 100%;
          justify-content: center;
        }

        .page-title h1 {
          font-size: var(--text-2xl);
        }

        .stat-card {
          flex-direction: column;
          text-align: center;
        }

        .stat-icon {
          width: 60px;
          height: 60px;
        }

        .btn {
          width: 100%;
          justify-content: center;
        }
      }

      /* Print Styles */
      @media print {
        .navbar,
        .page-actions,
        .section-actions,
        .chart-actions,
        .filter-panel {
          display: none !important;
        }

        body {
          background: white !important;
          color: black !important;
        }

        .section,
        .stat-card,
        .chart-container {
          box-shadow: none !important;
          border: 1px solid #ccc !important;
        }
      }

      /* Dark Mode Support */
      @media (prefers-color-scheme: dark) {
        :root {
          --solar-base3: #002b36;
          --solar-base2: #073642;
          --solar-base1: #586e75;
          --solar-base0: #657b83;
          --solar-base00: #839496;
          --solar-base01: #93a1a1;
          --solar-base02: #eee8d5;
          --solar-base03: #fdf6e3;
        }
      }
    </style>
  </head>
  <body>
    <!-- Professional Navigation -->
    <nav class="navbar" role="navigation">
      <div class="navbar-container">
        <a class="navbar-brand" href="{{ url_for('admin.dashboard') }}">
          <i class="fas fa-graduation-cap"></i>
          Academic Performance System
        </a>
        <ul class="navbar-nav">
          <li>
            <a class="nav-link active" href="{{ url_for('admin.dashboard') }}">
              <i class="fas fa-tachometer-alt"></i>
              <span>Dashboard</span>
            </a>
          </li>
          <li>
            <a
              class="nav-link"
              id="universal-access-link"
              href="{{ url_for('universal.dashboard') }}"
            >
              <i class="fas fa-users-cog"></i>
              <span>Universal Access</span>
            </a>
          </li>
          <li>
            <a class="nav-link" href="{{ url_for('admin.reports') }}">
              <i class="fas fa-chart-line"></i>
              <span>Reports</span>
            </a>
          </li>
          <li>
            <a
              class="nav-link"
              href="{{ url_for('universal.proxy_manage_students') }}"
            >
              <i class="fas fa-users"></i>
              <span>Students</span>
            </a>
          </li>
          <li>
            <a class="nav-link" href="{{ url_for('admin.manage_teachers') }}">
              <i class="fas fa-chalkboard-teacher"></i>
              <span>Teachers</span>
            </a>
          </li>
          <li>
            <a class="nav-link" href="{{ url_for('admin.manage_subjects') }}">
              <i class="fas fa-book"></i>
              <span>Subjects</span>
            </a>
          </li>
          <li>
            <a
              class="nav-link"
              href="{{ url_for('subject_config_api.subject_configuration_page') }}"
            >
              <i class="fas fa-cogs"></i>
              <span>Configuration</span>
            </a>
          </li>
          <li>
            <a
              class="nav-link"
              href="{{ url_for('admin.analytics_dashboard') }}"
            >
              <i class="fas fa-chart-bar"></i>
              <span>Analytics</span>
            </a>
          </li>
          <li>
            <a class="nav-link" href="{{ url_for('admin.student_promotion') }}">
              <i class="fas fa-graduation-cap"></i>
              <span>Promotion</span>
            </a>
          </li>
          <li>
            <a class="nav-link" href="{{ url_for('admin.dashboard') }}">
              <i class="fas fa-users-cog"></i>
              <span>Parent Portal</span>
            </a>
          </li>
          <li>
            <a
              class="nav-link"
              href="{{ url_for('permission.manage_permissions') }}"
            >
              <i class="fas fa-key"></i>
              <span>Permissions</span>
            </a>
          </li>
          <li>
            <a class="nav-link" href="{{ url_for('auth.logout_route') }}">
              <i class="fas fa-sign-out-alt"></i>
              <span>Logout</span>
            </a>
          </li>
        </ul>
      </div>
    </nav>

    <!-- Main Dashboard Container -->
    <div class="dashboard-container">
      <!-- Premium Page Header -->
      <div class="page-header animate-fade-in-up">
        <div class="page-title">
          <h1>
            <i class="fas fa-tachometer-alt"></i>
            Headteacher Dashboard
          </h1>
          <p>
            Welcome back! Here's your comprehensive school performance overview
            for {{ school_info.school_name or 'Hillview School' }}.
          </p>
        </div>
        <div class="page-actions">
          <button class="btn-outline btn-sm" onclick="toggleFilterPanel()">
            <i class="fas fa-filter"></i> Advanced Filters
          </button>
          <button class="btn-outline btn-sm" onclick="refreshDashboard()">
            <i class="fas fa-sync"></i> Refresh Data
          </button>
          <button class="btn btn-lg" onclick="generateComprehensiveReport()">
            <i class="fas fa-file-alt"></i> Generate Report
          </button>
        </div>
      </div>

      <!-- System Status Alerts -->
      <div class="section animate-fade-in-left" id="alertsSection">
        <div class="section-header">
          <h2>
            <i class="fas fa-bell"></i>
            System Status & Alerts
            <span class="stat-trend" id="alertsCount">
              {{ system_alerts|length if system_alerts else 0 }} Active
            </span>
          </h2>
          <div class="section-actions">
            <button class="btn-outline btn-sm" onclick="refreshAlerts()">
              <i class="fas fa-refresh"></i> Refresh
            </button>
          </div>
        </div>

        {% if system_alerts %} {% for alert in system_alerts %}
        <div class="alert alert-{{ alert.type }} animate-fade-in-up">
          <div class="alert-icon">
            {% if alert.type == 'danger' %}
            <i class="fas fa-exclamation-circle"></i>
            {% elif alert.type == 'warning' %}
            <i class="fas fa-exclamation-triangle"></i>
            {% elif alert.type == 'info' %}
            <i class="fas fa-info-circle"></i>
            {% elif alert.type == 'success' %}
            <i class="fas fa-check-circle"></i>
            {% endif %}
          </div>
          <div class="alert-content">
            <div class="alert-title">{{ alert.title }}</div>
            <div class="alert-message">{{ alert.message }}</div>
            {% if alert.timestamp %}
            <small class="text-muted"
              >{{ alert.timestamp.strftime('%Y-%m-%d %H:%M') }}</small
            >
            {% endif %}
          </div>
        </div>
        {% endfor %} {% else %}
        <div class="alert alert-success animate-fade-in-up">
          <div class="alert-icon">
            <i class="fas fa-shield-alt"></i>
          </div>
          <div class="alert-content">
            <div class="alert-title">All Systems Operational</div>
            <div class="alert-message">
              No system alerts at this time. All systems are running smoothly
              and efficiently.
            </div>
          </div>
        </div>
        {% endif %}
      </div>

      <!-- Advanced Filter Panel -->
      <div id="filterPanel" class="filter-panel" style="display: none">
        <div class="filter-header">
          <h3>
            <i class="fas fa-sliders-h"></i>
            Advanced Data Filters
          </h3>
          <button class="btn-outline btn-sm" onclick="resetAllFilters()">
            <i class="fas fa-undo"></i> Reset All
          </button>
        </div>
        <div class="filter-content">
          <div class="filter-row">
            <div class="filter-group">
              <label class="form-label" for="gradeFilter">Grade Level:</label>
              <select id="gradeFilter" class="form-control">
                <option value="">All Grades</option>
                <option value="7">Grade 7</option>
                <option value="8">Grade 8</option>
                <option value="9">Grade 9</option>
                <option value="10">Grade 10</option>
                <option value="11">Grade 11</option>
                <option value="12">Grade 12</option>
              </select>
            </div>
            <div class="filter-group">
              <label class="form-label" for="termFilter">Academic Term:</label>
              <select id="termFilter" class="form-control">
                <option value="">All Terms</option>
                <option value="1">Term 1</option>
                <option value="2">Term 2</option>
                <option value="3">Term 3</option>
              </select>
            </div>
            <div class="filter-group">
              <label class="form-label" for="performanceFilter"
                >Performance Level:</label
              >
              <select id="performanceFilter" class="form-control">
                <option value="">All Performance Levels</option>
                <option value="EE">Exceeds Expectations</option>
                <option value="ME">Meets Expectations</option>
                <option value="AE">Approaches Expectations</option>
                <option value="BE">Below Expectations</option>
              </select>
            </div>
          </div>
          <div class="filter-row">
            <div class="filter-group">
              <label class="form-label" for="dateFrom">From Date:</label>
              <input type="date" id="dateFrom" class="form-control" />
            </div>
            <div class="filter-group">
              <label class="form-label" for="dateTo">To Date:</label>
              <input type="date" id="dateTo" class="form-control" />
            </div>
            <div class="filter-group">
              <button class="btn btn-lg" onclick="applyAdvancedFilters()">
                <i class="fas fa-search"></i> Apply Filters
              </button>
            </div>
          </div>
        </div>
      </div>

      <!-- Premium Statistics Dashboard -->
      <div class="stats-grid">
        <div class="stat-card animate-fade-in-up" style="animation-delay: 0.1s">
          <div class="stat-icon primary">
            <i class="fas fa-users"></i>
          </div>
          <div class="stat-content">
            <div class="stat-number" id="total-assessed">
              {{ total_students_assessed or 1250 }}
            </div>
            <div class="stat-label">Students Assessed</div>
            <div class="stat-trend">
              <i class="fas fa-arrow-up"></i> +5.2% from last term
            </div>
          </div>
        </div>

        <div class="stat-card animate-fade-in-up" style="animation-delay: 0.2s">
          <div class="stat-icon success">
            <i class="fas fa-trophy"></i>
          </div>
          <div class="stat-content">
            <div class="stat-number" id="best-class">
              {{ best_performing_class or 'Grade 10A' }}
            </div>
            <div class="stat-label">Best Performing Class</div>
            <div class="stat-trend">
              <i class="fas fa-medal"></i> {{ best_class_average or 92 }}%
              average
            </div>
          </div>
        </div>

        <div class="stat-card animate-fade-in-up" style="animation-delay: 0.3s">
          <div class="stat-icon info">
            <i class="fas fa-percentage"></i>
          </div>
          <div class="stat-content">
            <div class="stat-number" id="school-average">
              {{ school_average or 78 }}%
            </div>
            <div class="stat-label">School Average</div>
            <div class="stat-trend">
              <i class="fas fa-arrow-up"></i> +2.8% improvement
            </div>
          </div>
        </div>

        <div class="stat-card animate-fade-in-up" style="animation-delay: 0.4s">
          <div class="stat-icon warning">
            <i class="fas fa-file-alt"></i>
          </div>
          <div class="stat-content">
            <div class="stat-number" id="reports-generated">
              {{ reports_generated or 45 }}
            </div>
            <div class="stat-label">Reports Generated</div>
            <div class="stat-trend neutral">
              <i class="fas fa-clock"></i> This month
            </div>
          </div>
        </div>

        <!-- Additional Stats for Full Solar Theme -->
        <div class="stat-card animate-fade-in-up" style="animation-delay: 0.5s">
          <div class="stat-icon danger">
            <i class="fas fa-exclamation-triangle"></i>
          </div>
          <div class="stat-content">
            <div class="stat-number">8</div>
            <div class="stat-label">Students At Risk</div>
            <div class="stat-trend negative">
              <i class="fas fa-arrow-down"></i> Needs attention
            </div>
          </div>
        </div>

        <div class="stat-card animate-fade-in-up" style="animation-delay: 0.6s">
          <div class="stat-icon success">
            <i class="fas fa-graduation-cap"></i>
          </div>
          <div class="stat-content">
            <div class="stat-number">95%</div>
            <div class="stat-label">Attendance Rate</div>
            <div class="stat-trend">
              <i class="fas fa-arrow-up"></i> +1.5% this week
            </div>
          </div>
        </div>

        <div class="stat-card animate-fade-in-up" style="animation-delay: 0.7s">
          <div class="stat-icon info">
            <i class="fas fa-chalkboard-teacher"></i>
          </div>
          <div class="stat-content">
            <div class="stat-number">42</div>
            <div class="stat-label">Active Teachers</div>
            <div class="stat-trend neutral">
              <i class="fas fa-users"></i> Full staff capacity
            </div>
          </div>
        </div>

        <div class="stat-card animate-fade-in-up" style="animation-delay: 0.8s">
          <div class="stat-icon warning">
            <i class="fas fa-book"></i>
          </div>
          <div class="stat-content">
            <div class="stat-number">15</div>
            <div class="stat-label">Active Subjects</div>
            <div class="stat-trend">
              <i class="fas fa-plus"></i> 2 new this term
            </div>
          </div>
        </div>
      </div>

      <!-- Premium Charts Section -->
      <div class="section animate-fade-in-right">
        <div class="section-header">
          <h2>
            <i class="fas fa-chart-pie"></i>
            Performance Analytics
          </h2>
          <div class="section-actions">
            <button class="btn-outline btn-sm" onclick="exportChartsAsPDF()">
              <i class="fas fa-download"></i> Export Charts
            </button>
            <button class="btn-outline btn-sm" onclick="refreshCharts()">
              <i class="fas fa-refresh"></i> Refresh
            </button>
          </div>
        </div>

        <div class="charts-grid">
          <div class="chart-container animate-fade-in-up">
            <div class="chart-header">
              <h3>Performance Distribution</h3>
              <div class="chart-actions">
                <button
                  class="btn-outline btn-sm"
                  onclick="toggleChartType('performanceChart')"
                >
                  <i class="fas fa-exchange-alt"></i> Toggle View
                </button>
              </div>
            </div>
            <div class="chart-content">
              <canvas id="performanceDonutChart"></canvas>
            </div>
          </div>

          <div
            class="chart-container animate-fade-in-up"
            style="animation-delay: 0.1s"
          >
            <div class="chart-header">
              <h3>Class Performance Comparison</h3>
              <div class="chart-actions">
                <button
                  class="btn-outline btn-sm"
                  onclick="drillDownChart('classComparison')"
                >
                  <i class="fas fa-search-plus"></i> Drill Down
                </button>
              </div>
            </div>
            <div class="chart-content">
              <canvas id="classComparisonChart"></canvas>
            </div>
          </div>

          <div
            class="chart-container animate-fade-in-up"
            style="animation-delay: 0.2s"
          >
            <div class="chart-header">
              <h3>Trend Analysis</h3>
              <div class="chart-actions">
                <select
                  class="form-control"
                  style="width: auto"
                  onchange="updateTrendChart(this.value)"
                >
                  <option value="monthly">Monthly</option>
                  <option value="weekly">Weekly</option>
                  <option value="daily">Daily</option>
                </select>
              </div>
            </div>
            <div class="chart-content">
              <canvas id="trendChart"></canvas>
            </div>
          </div>

          <div
            class="chart-container animate-fade-in-up"
            style="animation-delay: 0.3s"
          >
            <div class="chart-header">
              <h3>Subject Performance Heatmap</h3>
              <div class="chart-actions">
                <button
                  class="btn-outline btn-sm"
                  onclick="toggleHeatmapMetric()"
                >
                  <i class="fas fa-thermometer-half"></i> Change Metric
                </button>
              </div>
            </div>
            <div class="chart-content">
              <canvas id="heatmapChart"></canvas>
            </div>
          </div>
        </div>
      </div>

      <!-- Advanced Analytics Section -->
      <div class="section animate-fade-in-left">
        <div class="section-header">
          <h2>
            <i class="fas fa-brain"></i>
            Advanced Analytics & Insights
          </h2>
          <div class="section-actions">
            <button class="btn btn-sm" onclick="openFullAnalytics()">
              <i class="fas fa-external-link-alt"></i> Full Analytics Dashboard
            </button>
          </div>
        </div>

        <div class="charts-grid">
          <!-- Performance Predictions -->
          <div class="chart-container">
            <div class="chart-header">
              <h3>Performance Predictions</h3>
              <div class="chart-actions">
                <select
                  class="form-control"
                  style="width: auto"
                  onchange="updatePredictionModel(this.value)"
                >
                  <option value="linear">Linear Model</option>
                  <option value="polynomial">Polynomial Model</option>
                  <option value="neural">Neural Network</option>
                </select>
              </div>
            </div>
            <div class="chart-content">
              <canvas id="predictionChart"></canvas>
            </div>
          </div>

          <!-- Risk Assessment -->
          <div class="chart-container">
            <div class="chart-header">
              <h3>Student Risk Assessment</h3>
              <div class="chart-actions">
                <button
                  class="btn-sm btn-warning"
                  onclick="generateRiskReport()"
                >
                  <i class="fas fa-exclamation-triangle"></i> Generate Risk
                  Report
                </button>
              </div>
            </div>
            <div class="chart-content" id="riskAssessmentContent">
              <div class="loading">
                <i class="fas fa-spinner fa-spin"></i>
                <p>Analyzing student performance data...</p>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- Comprehensive Performance Table -->
      <div class="section animate-fade-in-up">
        <div class="section-header">
          <h2>
            <i class="fas fa-table"></i>
            Detailed Performance Analysis
          </h2>
          <div class="section-actions">
            <button class="btn-outline btn-sm" onclick="toggleTableFilters()">
              <i class="fas fa-filter"></i> Table Filters
            </button>
            <button class="btn-outline btn-sm" onclick="exportTableData()">
              <i class="fas fa-file-excel"></i> Export Excel
            </button>
            <button class="btn-outline btn-sm" onclick="exportTablePDF()">
              <i class="fas fa-file-pdf"></i> Export PDF
            </button>
          </div>
        </div>

        <!-- Table Filters -->
        <div id="tableFilters" class="filter-panel" style="display: none">
          <div class="filter-header">
            <h3>
              <i class="fas fa-search"></i>
              Table Search & Filters
            </h3>
          </div>
          <div class="filter-content">
            <div class="filter-row">
              <div class="filter-group">
                <label class="form-label" for="searchInput">Search:</label>
                <input
                  type="text"
                  id="searchInput"
                  class="form-control"
                  placeholder="Search classes, subjects, or performance..."
                  onkeyup="searchTable()"
                />
              </div>
              <div class="filter-group">
                <label class="form-label" for="gradeTableFilter">Grade:</label>
                <select
                  id="gradeTableFilter"
                  class="form-control"
                  onchange="filterTable()"
                >
                  <option value="">All Grades</option>
                  {% for grade in available_grades %}
                  <option value="{{ grade }}">Grade {{ grade }}</option>
                  {% endfor %}
                </select>
              </div>
              <div class="filter-group">
                <label class="form-label" for="performanceRangeFilter"
                  >Performance Range:</label
                >
                <select
                  id="performanceRangeFilter"
                  class="form-control"
                  onchange="filterTable()"
                >
                  <option value="">All Ranges</option>
                  <option value="excellent">Excellent (80-100%)</option>
                  <option value="good">Good (60-79%)</option>
                  <option value="average">Average (40-59%)</option>
                  <option value="poor">Needs Improvement (0-39%)</option>
                </select>
              </div>
            </div>
          </div>
        </div>

        <!-- Enhanced Performance Table -->
        <div class="table-responsive">
          <table class="performance-table" id="performanceTable">
            <thead>
              <tr>
                <th onclick="sortTable(0)">
                  <i class="fas fa-sort"></i> Grade & Stream
                </th>
                <th onclick="sortTable(1)"><i class="fas fa-sort"></i> Term</th>
                <th onclick="sortTable(2)">
                  <i class="fas fa-sort"></i> Assessment
                </th>
                <th onclick="sortTable(3)">
                  <i class="fas fa-sort"></i> Students
                </th>
                <th onclick="sortTable(4)">
                  <i class="fas fa-sort"></i> Class Average
                </th>
                <th>EE1</th>
                <th>EE2</th>
                <th>ME1</th>
                <th>ME2</th>
                <th>AE1</th>
                <th>AE2</th>
                <th>BE1</th>
                <th>BE2</th>
                <th>Actions</th>
              </tr>
            </thead>
            <tbody>
              {% for data in performance_data %}
              <tr
                class="performance-row"
                data-grade="{{ data.grade }}"
                data-term="{{ data.term }}"
                data-assessment="{{ data.assessment_type }}"
                data-average="{{ data.class_average }}"
              >
                <td class="class-info">
                  <strong>{{ data.grade }} {{ data.stream }}</strong>
                </td>
                <td>Term {{ data.term }}</td>
                <td>{{ data.assessment_type }}</td>
                <td class="student-count">{{ data.total_students }}</td>
                <td class="class-average">
                  <span
                    class="average-badge {% if data.class_average >= 80 %}average-excellent{% elif data.class_average >= 60 %}average-good{% elif data.class_average >= 40 %}average-needs-improvement{% else %}average-poor{% endif %}"
                  >
                    {{ "%.1f"|format(data.class_average) }}%
                  </span>
                </td>
                <td class="performance-cell">
                  {{ data.performance_counts.EE1 or 0 }}
                </td>
                <td class="performance-cell">
                  {{ data.performance_counts.EE2 or 0 }}
                </td>
                <td class="performance-cell">
                  {{ data.performance_counts.ME1 or 0 }}
                </td>
                <td class="performance-cell">
                  {{ data.performance_counts.ME2 or 0 }}
                </td>
                <td class="performance-cell">
                  {{ data.performance_counts.AE1 or 0 }}
                </td>
                <td class="performance-cell">
                  {{ data.performance_counts.AE2 or 0 }}
                </td>
                <td class="performance-cell">
                  {{ data.performance_counts.BE1 or 0 }}
                </td>
                <td class="performance-cell">
                  {{ data.performance_counts.BE2 or 0 }}
                </td>
                <td class="actions">
                  <button
                    class="btn-sm btn-info"
                    onclick="viewDetailedAnalysis('{{ data.grade }}', '{{ data.stream }}')"
                  >
                    <i class="fas fa-eye"></i> View Details
                  </button>
                  <button
                    class="btn-sm btn-warning"
                    onclick="generateClassReport('{{ data.grade }}', '{{ data.stream }}')"
                  >
                    <i class="fas fa-file-alt"></i> Report
                  </button>
                </td>
              </tr>
              {% endfor %}

              <!-- Sample data for demonstration if no data available -->
              {% if not performance_data %}
              <tr
                class="performance-row"
                data-grade="7"
                data-term="1"
                data-assessment="Midterm"
                data-average="85.2"
              >
                <td class="class-info"><strong>Grade 7A</strong></td>
                <td>Term 1</td>
                <td>Midterm</td>
                <td class="student-count">32</td>
                <td class="class-average">
                  <span class="average-badge average-excellent">85.2%</span>
                </td>
                <td class="performance-cell">8</td>
                <td class="performance-cell">12</td>
                <td class="performance-cell">7</td>
                <td class="performance-cell">3</td>
                <td class="performance-cell">2</td>
                <td class="performance-cell">0</td>
                <td class="performance-cell">0</td>
                <td class="performance-cell">0</td>
                <td class="actions">
                  <button
                    class="btn-sm btn-info"
                    onclick="viewDetailedAnalysis('Grade 7', 'A')"
                  >
                    <i class="fas fa-eye"></i> View Details
                  </button>
                  <button
                    class="btn-sm btn-warning"
                    onclick="generateClassReport('Grade 7', 'A')"
                  >
                    <i class="fas fa-file-alt"></i> Report
                  </button>
                </td>
              </tr>

              <tr
                class="performance-row"
                data-grade="7"
                data-term="1"
                data-assessment="Midterm"
                data-average="78.4"
              >
                <td class="class-info"><strong>Grade 7B</strong></td>
                <td>Term 1</td>
                <td>Midterm</td>
                <td class="student-count">30</td>
                <td class="class-average">
                  <span class="average-badge average-good">78.4%</span>
                </td>
                <td class="performance-cell">5</td>
                <td class="performance-cell">8</td>
                <td class="performance-cell">10</td>
                <td class="performance-cell">4</td>
                <td class="performance-cell">2</td>
                <td class="performance-cell">1</td>
                <td class="performance-cell">0</td>
                <td class="performance-cell">0</td>
                <td class="actions">
                  <button
                    class="btn-sm btn-info"
                    onclick="viewDetailedAnalysis('Grade 7', 'B')"
                  >
                    <i class="fas fa-eye"></i> View Details
                  </button>
                  <button
                    class="btn-sm btn-warning"
                    onclick="generateClassReport('Grade 7', 'B')"
                  >
                    <i class="fas fa-file-alt"></i> Report
                  </button>
                </td>
              </tr>

              <tr
                class="performance-row"
                data-grade="8"
                data-term="1"
                data-assessment="Midterm"
                data-average="91.7"
              >
                <td class="class-info"><strong>Grade 8A</strong></td>
                <td>Term 1</td>
                <td>Midterm</td>
                <td class="student-count">28</td>
                <td class="class-average">
                  <span class="average-badge average-excellent">91.7%</span>
                </td>
                <td class="performance-cell">15</td>
                <td class="performance-cell">8</td>
                <td class="performance-cell">3</td>
                <td class="performance-cell">2</td>
                <td class="performance-cell">0</td>
                <td class="performance-cell">0</td>
                <td class="performance-cell">0</td>
                <td class="performance-cell">0</td>
                <td class="actions">
                  <button
                    class="btn-sm btn-info"
                    onclick="viewDetailedAnalysis('Grade 8', 'A')"
                  >
                    <i class="fas fa-eye"></i> View Details
                  </button>
                  <button
                    class="btn-sm btn-warning"
                    onclick="generateClassReport('Grade 8', 'A')"
                  >
                    <i class="fas fa-file-alt"></i> Report
                  </button>
                </td>
              </tr>

              <tr
                class="performance-row"
                data-grade="8"
                data-term="1"
                data-assessment="Midterm"
                data-average="65.3"
              >
                <td class="class-info"><strong>Grade 8B</strong></td>
                <td>Term 1</td>
                <td>Midterm</td>
                <td class="student-count">29</td>
                <td class="class-average">
                  <span class="average-badge average-good">65.3%</span>
                </td>
                <td class="performance-cell">2</td>
                <td class="performance-cell">6</td>
                <td class="performance-cell">8</td>
                <td class="performance-cell">7</td>
                <td class="performance-cell">4</td>
                <td class="performance-cell">2</td>
                <td class="performance-cell">0</td>
                <td class="performance-cell">0</td>
                <td class="actions">
                  <button
                    class="btn-sm btn-info"
                    onclick="viewDetailedAnalysis('Grade 8', 'B')"
                  >
                    <i class="fas fa-eye"></i> View Details
                  </button>
                  <button
                    class="btn-sm btn-warning"
                    onclick="generateClassReport('Grade 8', 'B')"
                  >
                    <i class="fas fa-file-alt"></i> Report
                  </button>
                </td>
              </tr>

              <tr
                class="performance-row"
                data-grade="9"
                data-term="1"
                data-assessment="Midterm"
                data-average="88.9"
              >
                <td class="class-info"><strong>Grade 9A</strong></td>
                <td>Term 1</td>
                <td>Midterm</td>
                <td class="student-count">31</td>
                <td class="class-average">
                  <span class="average-badge average-excellent">88.9%</span>
                </td>
                <td class="performance-cell">12</td>
                <td class="performance-cell">10</td>
                <td class="performance-cell">6</td>
                <td class="performance-cell">2</td>
                <td class="performance-cell">1</td>
                <td class="performance-cell">0</td>
                <td class="performance-cell">0</td>
                <td class="performance-cell">0</td>
                <td class="actions">
                  <button
                    class="btn-sm btn-info"
                    onclick="viewDetailedAnalysis('Grade 9', 'A')"
                  >
                    <i class="fas fa-eye"></i> View Details
                  </button>
                  <button
                    class="btn-sm btn-warning"
                    onclick="generateClassReport('Grade 9', 'A')"
                  >
                    <i class="fas fa-file-alt"></i> Report
                  </button>
                </td>
              </tr>

              <tr
                class="performance-row"
                data-grade="9"
                data-term="1"
                data-assessment="Midterm"
                data-average="72.1"
              >
                <td class="class-info"><strong>Grade 9B</strong></td>
                <td>Term 1</td>
                <td>Midterm</td>
                <td class="student-count">30</td>
                <td class="class-average">
                  <span class="average-badge average-good">72.1%</span>
                </td>
                <td class="performance-cell">4</td>
                <td class="performance-cell">8</td>
                <td class="performance-cell">9</td>
                <td class="performance-cell">6</td>
                <td class="performance-cell">2</td>
                <td class="performance-cell">1</td>
                <td class="performance-cell">0</td>
                <td class="performance-cell">0</td>
                <td class="actions">
                  <button
                    class="btn-sm btn-info"
                    onclick="viewDetailedAnalysis('Grade 9', 'B')"
                  >
                    <i class="fas fa-eye"></i> View Details
                  </button>
                  <button
                    class="btn-sm btn-warning"
                    onclick="generateClassReport('Grade 9', 'B')"
                  >
                    <i class="fas fa-file-alt"></i> Report
                  </button>
                </td>
              </tr>

              <tr
                class="performance-row"
                data-grade="10"
                data-term="1"
                data-assessment="Midterm"
                data-average="94.2"
              >
                <td class="class-info"><strong>Grade 10A</strong></td>
                <td>Term 1</td>
                <td>Midterm</td>
                <td class="student-count">27</td>
                <td class="class-average">
                  <span class="average-badge average-excellent">94.2%</span>
                </td>
                <td class="performance-cell">18</td>
                <td class="performance-cell">6</td>
                <td class="performance-cell">2</td>
                <td class="performance-cell">1</td>
                <td class="performance-cell">0</td>
                <td class="performance-cell">0</td>
                <td class="performance-cell">0</td>
                <td class="performance-cell">0</td>
                <td class="actions">
                  <button
                    class="btn-sm btn-info"
                    onclick="viewDetailedAnalysis('Grade 10', 'A')"
                  >
                    <i class="fas fa-eye"></i> View Details
                  </button>
                  <button
                    class="btn-sm btn-warning"
                    onclick="generateClassReport('Grade 10', 'A')"
                  >
                    <i class="fas fa-file-alt"></i> Report
                  </button>
                </td>
              </tr>

              <tr
                class="performance-row"
                data-grade="10"
                data-term="1"
                data-assessment="Midterm"
                data-average="58.7"
              >
                <td class="class-info"><strong>Grade 10B</strong></td>
                <td>Term 1</td>
                <td>Midterm</td>
                <td class="student-count">25</td>
                <td class="class-average">
                  <span class="average-badge average-needs-improvement"
                    >58.7%</span
                  >
                </td>
                <td class="performance-cell">1</td>
                <td class="performance-cell">3</td>
                <td class="performance-cell">6</td>
                <td class="performance-cell">8</td>
                <td class="performance-cell">5</td>
                <td class="performance-cell">2</td>
                <td class="performance-cell">0</td>
                <td class="performance-cell">0</td>
                <td class="actions">
                  <button
                    class="btn-sm btn-info"
                    onclick="viewDetailedAnalysis('Grade 10', 'B')"
                  >
                    <i class="fas fa-eye"></i> View Details
                  </button>
                  <button
                    class="btn-sm btn-warning"
                    onclick="generateClassReport('Grade 10', 'B')"
                  >
                    <i class="fas fa-file-alt"></i> Report
                  </button>
                </td>
              </tr>
              {% endif %}
            </tbody>
          </table>
        </div>

        <!-- Enhanced Pagination -->
        <div class="pagination-container">
          <div class="pagination-info">
            <span id="tableInfo"
              >Showing {{ performance_data|length }} results</span
            >
          </div>
          <div class="pagination-controls">
            <button
              class="btn-outline btn-sm"
              onclick="previousPage()"
              id="prevBtn"
            >
              <i class="fas fa-chevron-left"></i> Previous
            </button>
            <div class="page-numbers" id="pageNumbers">
              <!-- Dynamic page numbers will be inserted here -->
            </div>
            <button
              class="btn-outline btn-sm"
              onclick="nextPage()"
              id="nextBtn"
            >
              Next <i class="fas fa-chevron-right"></i>
            </button>
          </div>
        </div>
      </div>

      <!-- Quick Actions Panel -->
      <div class="section animate-fade-in-right">
        <div class="section-header">
          <h2>
            <i class="fas fa-lightning-bolt"></i>
            Quick Actions
          </h2>
        </div>
        <div class="stats-grid">
          <div
            class="stat-card"
            style="cursor: pointer"
            onclick="scheduleParentMeetings()"
          >
            <div class="stat-icon info">
              <i class="fas fa-calendar"></i>
            </div>
            <div class="stat-content">
              <div class="stat-label">Schedule Parent Meetings</div>
              <div class="stat-trend">
                <i class="fas fa-plus"></i> Create new meetings
              </div>
            </div>
          </div>

          <div
            class="stat-card"
            style="cursor: pointer"
            onclick="generateProgressReports()"
          >
            <div class="stat-icon success">
              <i class="fas fa-chart-line"></i>
            </div>
            <div class="stat-content">
              <div class="stat-label">Generate Progress Reports</div>
              <div class="stat-trend">
                <i class="fas fa-download"></i> Bulk generation available
              </div>
            </div>
          </div>

          <div
            class="stat-card"
            style="cursor: pointer"
            onclick="reviewTeacherPerformance()"
          >
            <div class="stat-icon warning">
              <i class="fas fa-user-check"></i>
            </div>
            <div class="stat-content">
              <div class="stat-label">Teacher Performance Review</div>
              <div class="stat-trend">
                <i class="fas fa-star"></i> Quarterly assessment
              </div>
            </div>
          </div>

          <div
            class="stat-card"
            style="cursor: pointer"
            onclick="manageExamSchedule()"
          >
            <div class="stat-icon danger">
              <i class="fas fa-clock"></i>
            </div>
            <div class="stat-content">
              <div class="stat-label">Manage Exam Schedule</div>
              <div class="stat-trend">
                <i class="fas fa-edit"></i> Update timetables
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Enhanced JavaScript Functionality -->
    <script>
      // Global Configuration with Sample Data for Solar Theme Demo
      window.performanceData = {
        labels: [
          "Grade 7A",
          "Grade 7B",
          "Grade 8A",
          "Grade 8B",
          "Grade 9A",
          "Grade 9B",
          "Grade 10A",
          "Grade 10B",
        ],
        datasets: [
          {
            label: "Class Average (%)",
            data: [85.2, 78.4, 91.7, 65.3, 88.9, 72.1, 94.2, 58.7],
            backgroundColor: [
              "rgba(255, 159, 0, 0.8)", // Solar Orange
              "rgba(255, 159, 0, 0.6)",
              "rgba(220, 155, 50, 0.8)", // Solar Gold
              "rgba(220, 155, 50, 0.6)",
              "rgba(255, 103, 103, 0.8)", // Solar Red
              "rgba(255, 103, 103, 0.6)",
              "rgba(56, 142, 60, 0.8)", // Solar Green
              "rgba(56, 142, 60, 0.6)",
            ],
            borderColor: [
              "rgba(255, 159, 0, 1)",
              "rgba(255, 159, 0, 1)",
              "rgba(220, 155, 50, 1)",
              "rgba(220, 155, 50, 1)",
              "rgba(255, 103, 103, 1)",
              "rgba(255, 103, 103, 1)",
              "rgba(56, 142, 60, 1)",
              "rgba(56, 142, 60, 1)",
            ],
            borderWidth: 2,
          },
        ],
      };

      window.gradeDistribution = {
        labels: ["EE1", "EE2", "ME1", "ME2", "AE1", "AE2", "BE1", "BE2"],
        datasets: [
          {
            label: "Student Count",
            data: [65, 52, 44, 33, 14, 8, 2, 1],
            backgroundColor: [
              "rgba(56, 142, 60, 0.9)", // Excellent - Green
              "rgba(56, 142, 60, 0.7)",
              "rgba(220, 155, 50, 0.9)", // Good - Gold
              "rgba(220, 155, 50, 0.7)",
              "rgba(255, 159, 0, 0.9)", // Adequate - Orange
              "rgba(255, 159, 0, 0.7)",
              "rgba(255, 103, 103, 0.9)", // Needs Improvement - Red
              "rgba(255, 103, 103, 0.7)",
            ],
            borderColor: [
              "rgba(56, 142, 60, 1)",
              "rgba(56, 142, 60, 1)",
              "rgba(220, 155, 50, 1)",
              "rgba(220, 155, 50, 1)",
              "rgba(255, 159, 0, 1)",
              "rgba(255, 159, 0, 1)",
              "rgba(255, 103, 103, 1)",
              "rgba(255, 103, 103, 1)",
            ],
            borderWidth: 2,
          },
        ],
      };

      window.attendanceTrend = {
        labels: [
          "Week 1",
          "Week 2",
          "Week 3",
          "Week 4",
          "Week 5",
          "Week 6",
          "Week 7",
          "Week 8",
        ],
        datasets: [
          {
            label: "Attendance Rate (%)",
            data: [94.5, 95.2, 93.8, 96.1, 94.7, 95.5, 92.3, 96.8],
            fill: true,
            borderColor: "rgba(56, 142, 60, 1)",
            backgroundColor: "rgba(56, 142, 60, 0.1)",
            tension: 0.4,
            pointBackgroundColor: "rgba(56, 142, 60, 1)",
            pointBorderColor: "rgba(255, 255, 255, 1)",
            pointBorderWidth: 2,
            pointRadius: 6,
          },
        ],
      };

      window.dashboardConfig = {
        schoolName: "Hillview School",
        totalStudentsAssessed: 218,
        bestPerformingClass: "Grade 10A",
        schoolAverage: 79.3,
        reportsGenerated: 24,
      };

      // Solar Theme Chart Configuration
      Chart.defaults.color = "#586e75";
      Chart.defaults.backgroundColor = "rgba(181, 137, 0, 0.1)";
      Chart.defaults.borderColor = "#b58900";
      Chart.defaults.font.family = "Source Sans Pro";
      Chart.defaults.font.size = 14;

      // Enhanced Dashboard Functions
      function toggleFilterPanel() {
        const panel = document.getElementById("filterPanel");
        if (panel.style.display === "none" || !panel.style.display) {
          panel.style.display = "block";
          panel.classList.add("animate-fade-in-up");
        } else {
          panel.style.display = "none";
        }
      }

      function refreshDashboard() {
        showLoadingState();
        // Simulate data refresh
        setTimeout(() => {
          location.reload();
        }, 2000);
      }

      function generateComprehensiveReport() {
        const button = event.target.closest("button");
        const originalHTML = button.innerHTML;
        button.innerHTML =
          '<i class="fas fa-spinner fa-spin"></i> Generating...';
        button.disabled = true;

        setTimeout(() => {
          showSuccessMessage("Comprehensive report generated successfully!");
          button.innerHTML = originalHTML;
          button.disabled = false;
        }, 3000);
      }

      function resetAllFilters() {
        document.getElementById("gradeFilter").value = "";
        document.getElementById("termFilter").value = "";
        document.getElementById("performanceFilter").value = "";
        document.getElementById("dateFrom").value = "";
        document.getElementById("dateTo").value = "";
        applyAdvancedFilters();
      }

      function applyAdvancedFilters() {
        const filters = {
          grade: document.getElementById("gradeFilter").value,
          term: document.getElementById("termFilter").value,
          performance: document.getElementById("performanceFilter").value,
          dateFrom: document.getElementById("dateFrom").value,
          dateTo: document.getElementById("dateTo").value,
        };

        // Apply filters to table and charts
        filterPerformanceTable(filters);
        updateChartFilters(filters);
        toggleFilterPanel();
      }

      function filterPerformanceTable(filters) {
        const rows = document.querySelectorAll(".performance-row");
        let visibleCount = 0;

        rows.forEach((row) => {
          const grade = row.dataset.grade;
          const term = row.dataset.term;
          const assessment = row.dataset.assessment;

          const gradeMatch = !filters.grade || grade.includes(filters.grade);
          const termMatch = !filters.term || term === filters.term;
          const assessmentMatch =
            !filters.assessment || assessment === filters.assessment;

          if (gradeMatch && termMatch && assessmentMatch) {
            row.style.display = "";
            visibleCount++;
          } else {
            row.style.display = "none";
          }
        });

        updateTableInfo(visibleCount);
      }

      function updateTableInfo(count) {
        const tableInfo = document.getElementById("tableInfo");
        if (tableInfo) {
          tableInfo.textContent = `Showing ${count} results`;
        }
      }

      function toggleTableFilters() {
        const filters = document.getElementById("tableFilters");
        if (filters.style.display === "none" || !filters.style.display) {
          filters.style.display = "block";
          filters.classList.add("animate-fade-in-up");
        } else {
          filters.style.display = "none";
        }
      }

      function searchTable() {
        const searchTerm = document
          .getElementById("searchInput")
          .value.toLowerCase();
        const rows = document.querySelectorAll(".performance-row");

        rows.forEach((row) => {
          const text = row.textContent.toLowerCase();
          row.style.display = text.includes(searchTerm) ? "" : "none";
        });
      }

      function sortTable(columnIndex) {
        const table = document.getElementById("performanceTable");
        const tbody = table.querySelector("tbody");
        const rows = Array.from(tbody.querySelectorAll("tr"));

        rows.sort((a, b) => {
          const aText = a.cells[columnIndex].textContent.trim();
          const bText = b.cells[columnIndex].textContent.trim();

          // Handle numeric values
          const aNum = parseFloat(aText);
          const bNum = parseFloat(bText);

          if (!isNaN(aNum) && !isNaN(bNum)) {
            return aNum - bNum;
          }

          return aText.localeCompare(bText);
        });

        rows.forEach((row) => tbody.appendChild(row));
      }

      function exportTableData() {
        showSuccessMessage("Table data exported to Excel successfully!");
      }

      function exportTablePDF() {
        showSuccessMessage("Table exported to PDF successfully!");
      }

      function viewDetailedAnalysis(grade, stream) {
        showSuccessMessage(`Opening detailed analysis for ${grade} ${stream}`);
      }

      function generateClassReport(grade, stream) {
        showSuccessMessage(`Generating report for ${grade} ${stream}`);
      }

      // Quick Actions
      function scheduleParentMeetings() {
        showSuccessMessage("Parent meeting scheduler opened");
      }

      function generateProgressReports() {
        showSuccessMessage("Progress report generator opened");
      }

      function reviewTeacherPerformance() {
        showSuccessMessage("Teacher performance review opened");
      }

      function manageExamSchedule() {
        showSuccessMessage("Exam schedule manager opened");
      }

      // Utility Functions
      function showLoadingState() {
        const overlay = document.createElement("div");
        overlay.id = "loadingOverlay";
        overlay.innerHTML = `
          <div class="loading">
            <i class="fas fa-spinner fa-spin"></i>
            <p>Refreshing dashboard data...</p>
          </div>
        `;
        overlay.style.cssText = `
          position: fixed;
          top: 0;
          left: 0;
          width: 100%;
          height: 100%;
          background: rgba(0, 43, 54, 0.8);
          display: flex;
          justify-content: center;
          align-items: center;
          z-index: 9999;
        `;
        document.body.appendChild(overlay);
      }

      function showSuccessMessage(message) {
        const alert = document.createElement("div");
        alert.className = "alert alert-success animate-fade-in-up";
        alert.style.cssText = `
          position: fixed;
          top: 20px;
          right: 20px;
          z-index: 10000;
          min-width: 300px;
        `;
        alert.innerHTML = `
          <div class="alert-icon">
            <i class="fas fa-check-circle"></i>
          </div>
          <div class="alert-content">
            <div class="alert-title">Success</div>
            <div class="alert-message">${message}</div>
          </div>
        `;
        document.body.appendChild(alert);

        setTimeout(() => {
          alert.remove();
        }, 3000);
      }

      // Initialize Charts on Page Load
      document.addEventListener("DOMContentLoaded", function () {
        initializeSolarCharts();
        initializeAdvancedAnalytics();

        // Add animation delays to elements
        const cards = document.querySelectorAll(".stat-card, .chart-container");
        cards.forEach((card, index) => {
          card.style.animationDelay = `${index * 0.1}s`;
        });
      });

      function initializeSolarCharts() {
        // Performance Donut Chart
        const donutCtx = document.getElementById("performanceDonutChart");
        if (donutCtx) {
          new Chart(donutCtx, {
            type: "doughnut",
            data: {
              labels: [
                "Exceeds Expectations",
                "Meets Expectations",
                "Approaches Expectations",
                "Below Expectations",
              ],
              datasets: [
                {
                  data: [25, 35, 30, 10],
                  backgroundColor: ["#859900", "#268bd2", "#b58900", "#dc322f"],
                  borderColor: "#fdf6e3",
                  borderWidth: 3,
                },
              ],
            },
            options: {
              responsive: true,
              maintainAspectRatio: false,
              plugins: {
                legend: {
                  position: "bottom",
                  labels: {
                    padding: 20,
                    usePointStyle: true,
                    font: { family: "Source Sans Pro", size: 12 },
                  },
                },
              },
            },
          });
        }

        // Class Comparison Chart
        const comparisonCtx = document.getElementById("classComparisonChart");
        if (comparisonCtx) {
          new Chart(comparisonCtx, {
            type: "bar",
            data: {
              labels: [
                "Grade 7A",
                "Grade 7B",
                "Grade 8A",
                "Grade 8B",
                "Grade 9A",
                "Grade 9B",
              ],
              datasets: [
                {
                  label: "Class Average",
                  data: [78, 82, 75, 88, 79, 85],
                  backgroundColor: "rgba(181, 137, 0, 0.8)",
                  borderColor: "#b58900",
                  borderWidth: 2,
                  borderRadius: 6,
                },
              ],
            },
            options: {
              responsive: true,
              maintainAspectRatio: false,
              plugins: { legend: { display: false } },
              scales: {
                y: { beginAtZero: true, max: 100 },
                x: { grid: { display: false } },
              },
            },
          });
        }

        // Trend Chart
        const trendCtx = document.getElementById("trendChart");
        if (trendCtx) {
          new Chart(trendCtx, {
            type: "line",
            data: {
              labels: ["Jan", "Feb", "Mar", "Apr", "May", "Jun"],
              datasets: [
                {
                  label: "School Performance Trend",
                  data: [72, 75, 78, 76, 80, 82],
                  borderColor: "#b58900",
                  backgroundColor: "rgba(181, 137, 0, 0.1)",
                  tension: 0.4,
                  fill: true,
                },
              ],
            },
            options: {
              responsive: true,
              maintainAspectRatio: false,
              scales: {
                y: { beginAtZero: true, max: 100 },
              },
            },
          });
        }

        // Heatmap Chart (using Chart.js matrix chart)
        const heatmapCtx = document.getElementById("heatmapChart");
        if (heatmapCtx) {
          new Chart(heatmapCtx, {
            type: "scatter",
            data: {
              datasets: [
                {
                  label: "Subject Performance",
                  data: [
                    { x: 1, y: 1, v: 85 },
                    { x: 2, y: 1, v: 78 },
                    { x: 3, y: 1, v: 92 },
                    { x: 1, y: 2, v: 76 },
                    { x: 2, y: 2, v: 89 },
                    { x: 3, y: 2, v: 83 },
                    { x: 1, y: 3, v: 91 },
                    { x: 2, y: 3, v: 74 },
                    { x: 3, y: 3, v: 87 },
                  ],
                  backgroundColor: function (context) {
                    const value = context.parsed.v;
                    return value > 85
                      ? "#859900"
                      : value > 75
                      ? "#b58900"
                      : "#dc322f";
                  },
                },
              ],
            },
            options: {
              responsive: true,
              maintainAspectRatio: false,
              scales: {
                x: { type: "linear", position: "bottom" },
                y: { type: "linear" },
              },
            },
          });
        }
      }

      function initializeAdvancedAnalytics() {
        // Prediction Chart
        const predictionCtx = document.getElementById("predictionChart");
        if (predictionCtx) {
          new Chart(predictionCtx, {
            type: "line",
            data: {
              labels: [
                "Current",
                "+1 Month",
                "+2 Months",
                "+3 Months",
                "+6 Months",
              ],
              datasets: [
                {
                  label: "Predicted Performance",
                  data: [82, 83, 84, 85, 87],
                  borderColor: "#268bd2",
                  backgroundColor: "rgba(38, 139, 210, 0.1)",
                  borderDash: [5, 5],
                  tension: 0.4,
                  fill: true,
                },
                {
                  label: "Current Trend",
                  data: [82, 81, 80, null, null],
                  borderColor: "#b58900",
                  backgroundColor: "rgba(181, 137, 0, 0.1)",
                  tension: 0.4,
                  fill: true,
                },
              ],
            },
            options: {
              responsive: true,
              maintainAspectRatio: false,
              scales: {
                y: { beginAtZero: true, max: 100 },
              },
            },
          });
        }

        // Risk Assessment Content
        setTimeout(() => {
          const riskContent = document.getElementById("riskAssessmentContent");
          if (riskContent) {
            riskContent.innerHTML = `
              <div class="risk-summary">
                <div class="alert alert-warning">
                  <div class="alert-icon"><i class="fas fa-exclamation-triangle"></i></div>
                  <div class="alert-content">
                    <div class="alert-title">3 Students at Risk</div>
                    <div class="alert-message">Identified students requiring additional support</div>
                  </div>
                </div>
                <div class="alert alert-info">
                  <div class="alert-icon"><i class="fas fa-info-circle"></i></div>
                  <div class="alert-content">
                    <div class="alert-title">8 Students Improving</div>
                    <div class="alert-message">Showing positive performance trends</div>
                  </div>
                </div>
              </div>
            `;
          }
        }, 2000);
      }
    </script>
  </body>
</html>
