<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1.0, user-scalable=yes, maximum-scale=5.0"
    />
    <meta
      name="description"
      content="Parent Dashboard - {{ school_info.school_name or 'Hillview School' }} Management System"
    />
    <meta name="format-detection" content="telephone=no" />
    <meta name="mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="theme-color" content="#b58900" />

    <title>
      Parent Dashboard - {{ school_info.school_name or 'Hillview School' }}
    </title>

    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap"
      rel="stylesheet"
    />

    <style>
      /* Solar Theme Variables */
      :root {
        --solar-primary: #b58900;
        --solar-secondary: #839496;
        --solar-success: #2aa198;
        --solar-info: #268bd2;
        --solar-warning: #cb4b16;
        --solar-danger: #d33682;
        --solar-light: #fdf6e3;
        --solar-dark: #073642;
        --solar-body-bg: #002b36;
        --solar-body-color: #839496;
        --solar-card-bg: rgba(7, 54, 66, 0.95);
        --solar-glass: rgba(7, 54, 66, 0.85);
        --solar-glass-border: rgba(131, 148, 150, 0.3);
        --solar-hover: rgba(181, 137, 0, 0.1);
        --space-1: 0.25rem;
        --space-2: 0.5rem;
        --space-3: 0.75rem;
        --space-4: 1rem;
        --space-5: 1.25rem;
        --space-6: 1.5rem;
        --space-8: 2rem;
        --space-10: 2.5rem;
        --space-12: 3rem;
        --space-16: 4rem;
        --radius-sm: 0.375rem;
        --radius-md: 0.5rem;
        --radius-lg: 0.75rem;
        --radius-xl: 1rem;
        --radius-2xl: 1.5rem;
        --shadow-sm: 0 1px 3px 0 rgb(0 0 0 / 0.35),
          0 1px 2px -1px rgb(0 0 0 / 0.35);
        --shadow-md: 0 4px 6px -1px rgb(0 0 0 / 0.35),
          0 2px 4px -2px rgb(0 0 0 / 0.35);
        --shadow-lg: 0 10px 15px -3px rgb(0 0 0 / 0.35),
          0 4px 6px -4px rgb(0 0 0 / 0.35);
        --shadow-xl: 0 20px 25px -5px rgb(0 0 0 / 0.35),
          0 8px 10px -6px rgb(0 0 0 / 0.35);
      }

      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }

      body {
        font-family: "Inter", -apple-system, BlinkMacSystemFont, "Segoe UI",
          sans-serif;
        background: var(--solar-body-bg);
        color: var(--solar-body-color);
        line-height: 1.6;
        min-height: 100vh;
        overflow-x: hidden;
      }

      /* Animated background - temporarily disabled */
      /*
      body::before {
        content: "";
        position: fixed;
        inset: 0;
        background: radial-gradient(
            circle at 20% 80%,
            rgba(181, 137, 0, 0.08) 0%,
            transparent 50%
          ),
          radial-gradient(
            circle at 80% 20%,
            rgba(38, 139, 210, 0.08) 0%,
            transparent 50%
          ),
          radial-gradient(
            circle at 40% 40%,
            rgba(42, 161, 152, 0.08) 0%,
            transparent 50%
          );
        z-index: -1;
        animation: float 20s ease-in-out infinite;
        pointer-events: none;
      }
      */

      @keyframes float {
        0%,
        100% {
          transform: translateY(0px) rotate(0deg);
        }
        33% {
          transform: translateY(-18px) rotate(0.5deg);
        }
        66% {
          transform: translateY(10px) rotate(-0.5deg);
        }
      }

      /* Navigation */
      .navbar {
        background: var(--solar-card-bg);
        backdrop-filter: blur(20px);
        border-bottom: 1px solid var(--solar-glass-border);
        padding: var(--space-4) 0;
        position: sticky;
        top: 0;
        z-index: 50;
        overflow: hidden;
      }

      .navbar-content {
        max-width: 1280px;
        margin: 0 auto;
        display: flex;
        justify-content: space-between;
        align-items: center;
        padding: 0 var(--space-6);
        overflow: hidden;
      }

      .navbar-brand {
        display: flex;
        align-items: center;
        gap: var(--space-3);
        font-size: 1.25rem;
        font-weight: 700;
        color: var(--solar-light);
        text-decoration: none;
        overflow: hidden;
      }

      .navbar-brand svg,
      .navbar-brand img {
        width: 32px !important;
        height: 32px !important;
        max-width: 32px !important;
        max-height: 32px !important;
        flex-shrink: 0;
        overflow: hidden;
        color: var(--solar-primary);
        flex-shrink: 0;
      }

      .navbar-menu {
        display: flex;
        gap: var(--space-2);
        align-items: center;
      }

      .nav-link {
        display: flex;
        align-items: center;
        gap: var(--space-2);
        padding: var(--space-2) var(--space-4);
        color: var(--solar-secondary);
        text-decoration: none;
        border-radius: var(--radius-lg);
        transition: all 0.2s ease;
        font-weight: 500;
      }

      .nav-link:hover,
      .nav-link.active {
        background: var(--solar-hover);
        color: var(--solar-primary);
      }

      .nav-link svg {
        width: 20px;
        height: 20px;
      }

      /* Mobile menu toggle */
      .mobile-nav-toggle {
        display: none;
        background: none;
        border: none;
        color: var(--solar-light);
        cursor: pointer;
        padding: var(--space-2);
        border-radius: var(--radius-md);
      }

      .mobile-nav-toggle svg {
        width: 24px;
        height: 24px;
      }

      /* Main container */
      .dashboard-container {
        max-width: 1280px;
        margin: 0 auto;
        padding: var(--space-8) var(--space-6);
      }

      /* Welcome section */
      .welcome-section {
        background: var(--solar-card-bg);
        backdrop-filter: blur(20px);
        border: 1px solid var(--solar-glass-border);
        border-radius: var(--radius-2xl);
        padding: var(--space-10);
        margin-bottom: var(--space-8);
        text-align: center;
        position: relative;
        overflow: hidden;
      }

      /* Welcome section shimmer effect - temporarily disabled */
      /*
      .welcome-section::before {
        content: "";
        position: absolute;
        top: 0;
        left: -100%;
        width: 100%;
        height: 100%;
        background: linear-gradient(
          90deg,
          transparent,
          rgba(253, 246, 227, 0.05),
          transparent
        );
        animation: shimmer 3s ease-in-out infinite;
      }
      */

      @keyframes shimmer {
        0% {
          transform: translateX(-100%);
        }
        50% {
          transform: translateX(100%);
        }
        100% {
          transform: translateX(-100%);
        }
      }

      .welcome-title {
        font-size: 2.25rem;
        font-weight: 800;
        color: var(--solar-light);
        margin-bottom: var(--space-3);
        letter-spacing: -0.025em;
      }

      .welcome-subtitle {
        color: var(--solar-secondary);
        font-size: 1.125rem;
        margin-bottom: var(--space-6);
      }

      .status-badge {
        display: inline-flex;
        align-items: center;
        gap: var(--space-2);
        padding: var(--space-2) var(--space-4);
        border-radius: var(--radius-lg);
        font-size: 0.875rem;
        font-weight: 600;
      }

      .status-verified {
        background: rgba(42, 161, 152, 0.15);
        border: 1px solid rgba(42, 161, 152, 0.3);
        color: var(--solar-success);
      }

      .status-unverified {
        background: rgba(203, 75, 22, 0.15);
        border: 1px solid rgba(203, 75, 22, 0.3);
        color: var(--solar-warning);
      }

      .status-badge svg {
        width: 16px;
        height: 16px;
      }

      /* Flash messages */
      .flash-messages {
        margin-bottom: var(--space-6);
      }

      .alert {
        padding: var(--space-4);
        border-radius: var(--radius-lg);
        margin-bottom: var(--space-3);
        font-weight: 500;
        display: flex;
        align-items: center;
        gap: var(--space-3);
        backdrop-filter: blur(10px);
      }

      .alert-success {
        background: rgba(42, 161, 152, 0.15);
        border: 1px solid rgba(42, 161, 152, 0.3);
        color: var(--solar-success);
      }

      .alert-error,
      .alert-danger {
        background: rgba(211, 54, 130, 0.15);
        border: 1px solid rgba(211, 54, 130, 0.3);
        color: var(--solar-danger);
      }

      .alert-warning {
        background: rgba(203, 75, 22, 0.15);
        border: 1px solid rgba(203, 75, 22, 0.3);
        color: var(--solar-warning);
      }

      .alert-info {
        background: rgba(38, 139, 210, 0.15);
        border: 1px solid rgba(38, 139, 210, 0.3);
        color: var(--solar-info);
      }

      .alert svg {
        width: 20px;
        height: 20px;
        flex-shrink: 0;
      }

      /* Dashboard grid */
      .dashboard-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(400px, 1fr));
        gap: var(--space-8);
        margin-bottom: var(--space-8);
      }

      /* Dashboard cards */
      .dashboard-card {
        background: var(--solar-card-bg);
        backdrop-filter: blur(20px);
        border: 1px solid var(--solar-glass-border);
        border-radius: var(--radius-2xl);
        padding: var(--space-8);
        transition: all 0.3s ease;
        position: relative;
        overflow: hidden;
      }

      .dashboard-card:hover {
        transform: translateY(-4px);
        box-shadow: var(--shadow-xl);
        border-color: rgba(181, 137, 0, 0.4);
      }

      .card-header {
        display: flex;
        align-items: center;
        gap: var(--space-4);
        margin-bottom: var(--space-6);
        padding-bottom: var(--space-4);
        border-bottom: 1px solid var(--solar-glass-border);
      }

      .card-icon {
        width: 56px;
        height: 56px;
        background: linear-gradient(
          135deg,
          var(--solar-primary) 0%,
          var(--solar-warning) 100%
        );
        border-radius: var(--radius-xl);
        display: flex;
        align-items: center;
        justify-content: center;
        box-shadow: 0 8px 25px rgba(181, 137, 0, 0.25);
        position: relative;
        overflow: hidden;
      }

      /* Card icon shimmer effect - temporarily disabled */
      /*
      .card-icon::before {
        content: "";
        position: absolute;
        top: -50%;
        left: -50%;
        width: 200%;
        height: 200%;
        background: linear-gradient(
          45deg,
          transparent,
          rgba(253, 246, 227, 0.2),
          transparent
        );
        animation: iconShimmer 2s ease-in-out infinite;
      }
      */

      @keyframes iconShimmer {
        0% {
          transform: translateX(-100%) translateY(-100%) rotate(45deg);
        }
        50% {
          transform: translateX(100%) translateY(100%) rotate(45deg);
        }
        100% {
          transform: translateX(-100%) translateY(-100%) rotate(45deg);
        }
      }

      .card-icon svg {
        width: 28px;
        height: 28px;
        color: var(--solar-light);
        position: relative;
        z-index: 2;
      }

      .card-title {
        font-size: 1.5rem;
        font-weight: 700;
        color: var(--solar-light);
        margin: 0;
        letter-spacing: -0.025em;
      }

      /* Children list */
      .children-list {
        list-style: none;
        display: flex;
        flex-direction: column;
        gap: var(--space-4);
      }

      .child-item {
        background: rgba(7, 54, 66, 0.7);
        border: 1px solid var(--solar-glass-border);
        border-radius: var(--radius-xl);
        padding: var(--space-5);
        display: flex;
        justify-content: space-between;
        align-items: center;
        transition: all 0.3s ease;
        backdrop-filter: blur(10px);
      }

      .child-item:hover {
        transform: translateY(-2px);
        box-shadow: var(--shadow-lg);
        border-color: rgba(181, 137, 0, 0.3);
      }

      .child-info {
        flex: 1;
      }

      .child-name {
        font-weight: 700;
        color: var(--solar-light);
        font-size: 1.125rem;
        margin-bottom: var(--space-1);
      }

      .child-details {
        color: var(--solar-secondary);
        font-size: 0.875rem;
        display: flex;
        align-items: center;
        gap: var(--space-3);
      }

      .child-detail-item {
        display: flex;
        align-items: center;
        gap: var(--space-1);
      }

      .child-detail-item svg {
        width: 14px;
        height: 14px;
      }

      .child-actions {
        display: flex;
        gap: var(--space-3);
      }

      .btn-primary {
        display: inline-flex;
        align-items: center;
        gap: var(--space-2);
        padding: var(--space-3) var(--space-5);
        background: linear-gradient(
          135deg,
          var(--solar-primary) 0%,
          var(--solar-warning) 100%
        );
        color: var(--solar-light);
        text-decoration: none;
        border-radius: var(--radius-lg);
        font-weight: 600;
        font-size: 0.875rem;
        transition: all 0.2s ease;
        border: none;
        cursor: pointer;
        position: relative;
        overflow: hidden;
      }

      /* Button shimmer effect - temporarily disabled */
      /*
      .btn-primary::before {
        content: "";
        position: absolute;
        top: 0;
        left: -100%;
        width: 100%;
        height: 100%;
        background: linear-gradient(
          90deg,
          transparent,
          rgba(253, 246, 227, 0.2),
          transparent
        );
        transition: left 0.5s ease;
      }
      */

      .btn-primary:hover {
        transform: translateY(-2px);
        box-shadow: 0 8px 25px rgba(181, 137, 0, 0.3);
      }

      .btn-primary:hover::before {
        left: 100%;
      }

      .btn-primary svg {
        width: 16px;
        height: 16px;
      }

      /* Additional button styles */
      .btn-success {
        background: linear-gradient(
          135deg,
          var(--solar-success) 0%,
          #27ae60 100%
        );
        color: white;
        padding: var(--space-2) var(--space-4);
        border: none;
        border-radius: var(--radius-md);
        font-size: var(--text-sm);
        font-weight: 500;
        text-decoration: none;
        display: inline-flex;
        align-items: center;
        gap: var(--space-2);
        transition: all 0.2s ease;
        position: relative;
        overflow: hidden;
      }

      .btn-success::before {
        content: "";
        position: absolute;
        top: 0;
        left: -100%;
        width: 100%;
        height: 100%;
        background: linear-gradient(
          90deg,
          transparent,
          rgba(255, 255, 255, 0.2),
          transparent
        );
        transition: left 0.5s;
      }

      .btn-success:hover {
        transform: translateY(-1px);
        box-shadow: 0 4px 12px rgba(39, 174, 96, 0.3);
      }

      .btn-success:hover::before {
        left: 100%;
      }

      .btn-info {
        background: linear-gradient(135deg, var(--solar-info) 0%, #3498db 100%);
        color: white;
        padding: var(--space-2) var(--space-4);
        border: none;
        border-radius: var(--radius-md);
        font-size: var(--text-sm);
        font-weight: 500;
        text-decoration: none;
        display: inline-flex;
        align-items: center;
        gap: var(--space-2);
        transition: all 0.2s ease;
        position: relative;
        overflow: hidden;
      }

      .btn-info::before {
        content: "";
        position: absolute;
        top: 0;
        left: -100%;
        width: 100%;
        height: 100%;
        background: linear-gradient(
          90deg,
          transparent,
          rgba(255, 255, 255, 0.2),
          transparent
        );
        transition: left 0.5s;
      }

      .btn-info:hover {
        transform: translateY(-1px);
        box-shadow: 0 4px 12px rgba(52, 152, 219, 0.3);
      }

      .btn-info:hover::before {
        left: 100%;
      }

      /* No children state */
      .no-children {
        text-align: center;
        padding: var(--space-12);
        color: var(--solar-secondary);
      }

      .no-children svg {
        width: 80px;
        height: 80px;
        color: rgba(131, 148, 150, 0.3);
        margin-bottom: var(--space-6);
      }

      .no-children h3 {
        font-size: 1.25rem;
        font-weight: 600;
        color: var(--solar-light);
        margin-bottom: var(--space-3);
      }

      .no-children p {
        font-size: 0.875rem;
        line-height: 1.5;
      }

      /* Email list */
      .email-list {
        list-style: none;
        display: flex;
        flex-direction: column;
        gap: var(--space-3);
      }

      .email-item {
        background: rgba(7, 54, 66, 0.7);
        border-left: 4px solid var(--solar-primary);
        border-radius: 0 var(--radius-lg) var(--radius-lg) 0;
        padding: var(--space-4);
        backdrop-filter: blur(10px);
        transition: all 0.2s ease;
      }

      .email-item:hover {
        background: rgba(7, 54, 66, 0.9);
        transform: translateX(4px);
      }

      .email-subject {
        font-weight: 600;
        color: var(--solar-light);
        margin-bottom: var(--space-2);
        font-size: 0.875rem;
      }

      .email-meta {
        color: var(--solar-secondary);
        font-size: 0.75rem;
        display: flex;
        align-items: center;
        gap: var(--space-3);
      }

      .email-meta-item {
        display: flex;
        align-items: center;
        gap: var(--space-1);
      }

      .email-meta svg {
        width: 12px;
        height: 12px;
      }

      .no-emails {
        text-align: center;
        padding: var(--space-8);
        color: var(--solar-secondary);
      }

      .no-emails svg {
        width: 48px;
        height: 48px;
        color: rgba(131, 148, 150, 0.3);
        margin-bottom: var(--space-4);
      }

      /* Quick actions */
      .quick-actions {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(160px, 1fr));
        gap: var(--space-4);
        margin-top: var(--space-6);
      }

      .quick-action {
        background: rgba(7, 54, 66, 0.7);
        border: 1px solid var(--solar-glass-border);
        border-radius: var(--radius-xl);
        padding: var(--space-6);
        text-align: center;
        text-decoration: none;
        color: var(--solar-secondary);
        transition: all 0.3s ease;
        backdrop-filter: blur(10px);
        position: relative;
        overflow: hidden;
      }

      /* Quick action hover effect - temporarily disabled */
      /*
      .quick-action::before {
        content: "";
        position: absolute;
        inset: 0;
        background: linear-gradient(
          135deg,
          var(--solar-primary),
          var(--solar-warning)
        );
        opacity: 0;
        transition: opacity 0.3s ease;
      }
      */

      .quick-action:hover {
        transform: translateY(-4px);
        box-shadow: var(--shadow-lg);
        color: var(--solar-light);
        border-color: var(--solar-primary);
      }

      .quick-action:hover::before {
        opacity: 0.1;
      }

      .quick-action svg {
        width: 32px;
        height: 32px;
        color: var(--solar-primary);
        margin-bottom: var(--space-3);
        position: relative;
        z-index: 2;
        transition: all 0.3s ease;
      }

      .quick-action:hover svg {
        color: var(--solar-light);
        transform: scale(1.1);
      }

      .quick-action-title {
        font-weight: 600;
        margin: 0;
        position: relative;
        z-index: 2;
        font-size: 0.875rem;
      }

      /* Responsive design */
      @media (max-width: 768px) {
        .mobile-nav-toggle {
          display: block;
        }

        .navbar-menu {
          display: none;
          position: absolute;
          top: 100%;
          left: 0;
          right: 0;
          background: var(--solar-card-bg);
          border-top: 1px solid var(--solar-glass-border);
          flex-direction: column;
          padding: var(--space-4);
          gap: var(--space-2);
        }

        .navbar-menu.show {
          display: flex;
        }

        .nav-link {
          width: 100%;
          justify-content: flex-start;
          padding: var(--space-3) var(--space-4);
        }

        .dashboard-container {
          padding: var(--space-6) var(--space-4);
        }

        .welcome-section {
          padding: var(--space-8) var(--space-6);
        }

        .welcome-title {
          font-size: 1.75rem;
        }

        .dashboard-grid {
          grid-template-columns: 1fr;
          gap: var(--space-6);
        }

        .dashboard-card {
          padding: var(--space-6);
        }

        .child-item {
          flex-direction: column;
          gap: var(--space-4);
          text-align: center;
        }

        .child-actions {
          width: 100%;
          justify-content: center;
        }

        .btn-primary {
          width: 100%;
          justify-content: center;
        }

        .quick-actions {
          grid-template-columns: repeat(2, 1fr);
        }
      }

      @media (max-width: 480px) {
        .dashboard-container {
          padding: var(--space-4) var(--space-3);
        }

        .welcome-section {
          padding: var(--space-6) var(--space-4);
        }

        .welcome-title {
          font-size: 1.5rem;
        }

        .dashboard-card {
          padding: var(--space-5);
        }

        .card-header {
          flex-direction: column;
          text-align: center;
          gap: var(--space-3);
        }

        .quick-actions {
          grid-template-columns: 1fr;
        }
      }
    </style>
  </head>

  <body>
    <!-- Navigation -->
    <nav class="navbar">
      <div class="navbar-content">
        <a href="{{ url_for('parent.dashboard') }}" class="navbar-brand">
          <!-- School Logo -->
          {% if school_info.logo_url and school_info.logo_url !=
          '/static/images/default_logo.png' %}
          <img
            src="{{ school_info.logo_url }}"
            alt="School Logo"
            style="
              width: 32px !important;
              height: 32px !important;
              border-radius: 50%;
              object-fit: cover;
              flex-shrink: 0;
              display: block;
              max-width: 32px !important;
              max-height: 32px !important;
              overflow: hidden;
            "
          />
          {% else %}
          <!-- Academic Cap Icon -->
          <svg viewBox="0 0 24 24" fill="currentColor">
            <path
              d="M12 2L1 7v2c0 5.55 3.84 10.74 9 12c5.16-1.26 9-6.45 9-12V7l-11-5z"
            />
            <path d="M12 7a3 3 0 100 6 3 3 0 000-6z" />
          </svg>
          {% endif %}
          <span
            >{{ school_info.school_name or 'Hillview School' }} - Parent
            Portal</span
          >
        </a>

        <button class="mobile-nav-toggle" onclick="toggleMobileNav()">
          <!-- Menu Icon -->
          <svg
            viewBox="0 0 24 24"
            fill="none"
            stroke="currentColor"
            stroke-width="2"
          >
            <line x1="3" y1="6" x2="21" y2="6"></line>
            <line x1="3" y1="12" x2="21" y2="12"></line>
            <line x1="3" y1="18" x2="21" y2="18"></line>
          </svg>
        </button>

        <div class="navbar-menu" id="mobileNav">
          <a href="{{ url_for('parent.dashboard') }}" class="nav-link active">
            <!-- Home Icon -->
            <svg
              viewBox="0 0 24 24"
              fill="none"
              stroke="currentColor"
              stroke-width="2"
            >
              <path d="m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"></path>
              <polyline points="9,22 9,12 15,12 15,22"></polyline>
            </svg>
            <span>Dashboard</span>
          </a>
          <a href="{{ url_for('parent.children') }}" class="nav-link">
            <!-- Users Icon -->
            <svg
              viewBox="0 0 24 24"
              fill="none"
              stroke="currentColor"
              stroke-width="2"
            >
              <path d="M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"></path>
              <circle cx="9" cy="7" r="4"></circle>
              <path d="m22 21-2-2 2-2"></path>
            </svg>
            <span>My Children</span>
          </a>
          <a href="{{ url_for('parent.profile') }}" class="nav-link">
            <!-- User Icon -->
            <svg
              viewBox="0 0 24 24"
              fill="none"
              stroke="currentColor"
              stroke-width="2"
            >
              <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"></path>
              <circle cx="12" cy="7" r="4"></circle>
            </svg>
            <span>Profile</span>
          </a>
          <a href="{{ url_for('parent.logout') }}" class="nav-link">
            <!-- Logout Icon -->
            <svg
              viewBox="0 0 24 24"
              fill="none"
              stroke="currentColor"
              stroke-width="2"
            >
              <path d="M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"></path>
              <polyline points="16,17 21,12 16,7"></polyline>
              <line x1="21" y1="12" x2="9" y2="12"></line>
            </svg>
            <span>Logout</span>
          </a>
        </div>
      </div>
    </nav>

    <div class="dashboard-container">
      <!-- Welcome Section -->
      <div class="welcome-section">
        <h1 class="welcome-title">Welcome, {{ parent.get_full_name() }}!</h1>
        <p class="welcome-subtitle">
          Stay connected with your children's academic progress
        </p>

        {# Email verification status completely disabled for demo #}
      </div>

      <!-- Flash Messages -->
      {% with messages = get_flashed_messages(with_categories=true) %} {% if
      messages %}
      <div class="flash-messages">
        {% for category, message in messages %}
        <div
          class="alert alert-{{ 'danger' if category == 'error' else category }}"
        >
          {% if category == 'success' %}
          <!-- Check Circle Icon -->
          <svg viewBox="0 0 24 24" fill="currentColor">
            <path
              d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"
            />
          </svg>
          {% elif category == 'error' or category == 'danger' %}
          <!-- X Circle Icon -->
          <svg viewBox="0 0 24 24" fill="currentColor">
            <path
              d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm5 13.59L15.59 17 12 13.41 8.41 17 7 15.59 10.59 12 7 8.41 8.41 7 12 10.59 15.59 7 17 8.41 13.41 12 17 15.59z"
            />
          </svg>
          {% elif category == 'warning' %}
          <!-- Exclamation Triangle Icon -->
          <svg viewBox="0 0 24 24" fill="currentColor">
            <path
              d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 15h-2v-2h2v2zm0-4h-2V7h2v6z"
            />
          </svg>
          {% else %}
          <!-- Info Circle Icon -->
          <svg viewBox="0 0 24 24" fill="currentColor">
            <path
              d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 15h-2v-6h2v6zm0-8h-2V7h2v2z"
            />
          </svg>
          {% endif %}
          <span>{{ message }}</span>
        </div>
        {% endfor %}
      </div>
      {% endif %} {% endwith %}

      <!-- Dashboard Grid -->
      <div class="dashboard-grid">
        <!-- My Children Card -->
        <div class="dashboard-card">
          <div class="card-header">
            <div class="card-icon">
              <!-- Users Icon -->
              <svg
                viewBox="0 0 24 24"
                fill="none"
                stroke="currentColor"
                stroke-width="2"
              >
                <path d="M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"></path>
                <circle cx="9" cy="7" r="4"></circle>
                <path d="m22 21-2-2 2-2"></path>
              </svg>
            </div>
            <h2 class="card-title">My Children ({{ children|length }})</h2>
          </div>

          {% if children %}
          <ul class="children-list">
            {% for link, student, grade, stream in children %}
            <li class="child-item">
              <div class="child-info">
                <div class="child-name">{{ student.name }}</div>
                <div class="child-details">
                  <div class="child-detail-item">
                    <!-- ID Badge Icon -->
                    <svg
                      viewBox="0 0 24 24"
                      fill="none"
                      stroke="currentColor"
                      stroke-width="2"
                    >
                      <rect
                        x="3"
                        y="4"
                        width="18"
                        height="18"
                        rx="2"
                        ry="2"
                      ></rect>
                      <line x1="16" y1="2" x2="16" y2="6"></line>
                      <line x1="8" y1="2" x2="8" y2="6"></line>
                      <line x1="3" y1="10" x2="21" y2="10"></line>
                    </svg>
                    <span>{{ student.admission_number }}</span>
                  </div>
                  <div class="child-detail-item">
                    <!-- Academic Cap Icon -->
                    <svg
                      viewBox="0 0 24 24"
                      fill="none"
                      stroke="currentColor"
                      stroke-width="2"
                    >
                      <path d="M22 10v6M2 10l10-5 10 5-10 5z"></path>
                      <path d="M6 12v5c3 3 9 3 12 0v-5"></path>
                    </svg>
                    <span>{{ grade.name }} {{ stream.name }}</span>
                  </div>
                </div>
              </div>
              <div class="child-actions">
                <a
                  href="{{ url_for('parent.child_reports', child_id=student.id) }}"
                  class="btn-primary"
                >
                  <!-- Chart Bar Icon -->
                  <svg
                    viewBox="0 0 24 24"
                    fill="none"
                    stroke="currentColor"
                    stroke-width="2"
                  >
                    <line x1="12" y1="20" x2="12" y2="10"></line>
                    <line x1="18" y1="20" x2="18" y2="4"></line>
                    <line x1="6" y1="20" x2="6" y2="16"></line>
                  </svg>
                  <span>View Reports</span>
                </a>
                <a
                  href="{{ url_for('parent.child_grades', child_id=student.id) }}"
                  class="btn-secondary"
                  style="
                    background: var(--solar-accent);
                    color: var(--solar-base03);
                    border: none;
                  "
                >
                  <!-- Book Icon -->
                  <svg
                    viewBox="0 0 24 24"
                    fill="none"
                    stroke="currentColor"
                    stroke-width="2"
                  >
                    <path d="M4 19.5A2.5 2.5 0 0 1 6.5 17H20"></path>
                    <path
                      d="M6.5 2H20v20H6.5A2.5 2.5 0 0 1 4 19.5v-15A2.5 2.5 0 0 1 6.5 2z"
                    ></path>
                  </svg>
                  <span>View Grades</span>
                </a>
                <a
                  href="{{ url_for('parent.child_progress', child_id=student.id) }}"
                  class="btn-secondary"
                  style="
                    background: var(--solar-green);
                    color: var(--solar-base03);
                    border: none;
                  "
                >
                  <!-- Trending Up Icon -->
                  <svg
                    viewBox="0 0 24 24"
                    fill="none"
                    stroke="currentColor"
                    stroke-width="2"
                  >
                    <polyline points="22,7 13.5,15.5 8.5,10.5 2,17"></polyline>
                    <polyline points="16,7 22,7 22,13"></polyline>
                  </svg>
                  <span>Progress</span>
                </a>
              </div>
            </li>
            {% endfor %}
          </ul>
          {% else %}
          <div class="no-children">
            <!-- User Group Icon -->
            <svg
              viewBox="0 0 24 24"
              fill="none"
              stroke="currentColor"
              stroke-width="2"
            >
              <path d="M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"></path>
              <circle cx="9" cy="7" r="4"></circle>
              <path d="m22 21-2-2 2-2"></path>
            </svg>
            <h3>No children linked yet</h3>
            <p>No children are currently linked to your account.</p>
            <p>
              Please contact the school office to link your children to your
              account.
            </p>
          </div>
          {% endif %}
        </div>

        <!-- Recent Notifications Card -->
        <div class="dashboard-card">
          <div class="card-header">
            <div class="card-icon">
              <!-- Bell Icon -->
              <svg
                viewBox="0 0 24 24"
                fill="none"
                stroke="currentColor"
                stroke-width="2"
              >
                <path d="M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9"></path>
                <path d="M13.73 21a2 2 0 0 1-3.46 0"></path>
              </svg>
            </div>
            <h2 class="card-title">Recent Notifications</h2>
          </div>

          {% if recent_emails %}
          <ul class="email-list">
            {% for email in recent_emails %}
            <li class="email-item">
              <div class="email-subject">{{ email.subject }}</div>
              <div class="email-meta">
                <div class="email-meta-item">
                  <!-- Calendar Icon -->
                  <svg
                    viewBox="0 0 24 24"
                    fill="none"
                    stroke="currentColor"
                    stroke-width="2"
                  >
                    <rect
                      x="3"
                      y="4"
                      width="18"
                      height="18"
                      rx="2"
                      ry="2"
                    ></rect>
                    <line x1="16" y1="2" x2="16" y2="6"></line>
                    <line x1="8" y1="2" x2="8" y2="6"></line>
                    <line x1="3" y1="10" x2="21" y2="10"></line>
                  </svg>
                  <span>{{ email.created_at.strftime('%B %d, %Y') }}</span>
                </div>
                <div class="email-meta-item">
                  <!-- Tag Icon -->
                  <svg
                    viewBox="0 0 24 24"
                    fill="none"
                    stroke="currentColor"
                    stroke-width="2"
                  >
                    <path d="m15 5 4 4L7 21l-4-4 12-12Z"></path>
                    <path d="m9 9 5 5"></path>
                  </svg>
                  <span>{{ email.email_type.replace('_', ' ').title() }}</span>
                </div>
              </div>
            </li>
            {% endfor %}
          </ul>
          {% else %}
          <div class="no-emails">
            <!-- Mail Icon -->
            <svg
              viewBox="0 0 24 24"
              fill="none"
              stroke="currentColor"
              stroke-width="2"
            >
              <path
                d="M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"
              ></path>
              <polyline points="22,6 12,13 2,6"></polyline>
            </svg>
            <p>No recent notifications</p>
          </div>
          {% endif %}
        </div>
      </div>

      <!-- Quick Actions Card -->
      <div class="dashboard-card">
        <div class="card-header">
          <div class="card-icon">
            <!-- Lightning Bolt Icon -->
            <svg
              viewBox="0 0 24 24"
              fill="none"
              stroke="currentColor"
              stroke-width="2"
            >
              <polygon
                points="13,2 3,14 12,14 11,22 21,10 12,10 13,2"
              ></polygon>
            </svg>
          </div>
          <h2 class="card-title">Quick Actions</h2>
        </div>

        <div class="quick-actions">
          <a href="{{ url_for('parent.children') }}" class="quick-action">
            <!-- Users Icon -->
            <svg
              viewBox="0 0 24 24"
              fill="none"
              stroke="currentColor"
              stroke-width="2"
            >
              <path d="M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"></path>
              <circle cx="9" cy="7" r="4"></circle>
              <path d="m22 21-2-2 2-2"></path>
            </svg>
            <p class="quick-action-title">View Children</p>
          </a>

          <a href="{{ url_for('parent.profile') }}" class="quick-action">
            <!-- User Edit Icon -->
            <svg
              viewBox="0 0 24 24"
              fill="none"
              stroke="currentColor"
              stroke-width="2"
            >
              <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"></path>
              <circle cx="12" cy="7" r="4"></circle>
            </svg>
            <p class="quick-action-title">Update Profile</p>
          </a>

          <a
            href="#reports-section"
            class="quick-action"
            onclick="showReportsSection()"
          >
            <!-- Download Icon -->
            <svg
              viewBox="0 0 24 24"
              fill="none"
              stroke="currentColor"
              stroke-width="2"
            >
              <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path>
              <polyline points="7,10 12,15 17,10"></polyline>
              <line x1="12" y1="15" x2="12" y2="3"></line>
            </svg>
            <p class="quick-action-title">View Reports</p>
          </a>

          <a href="#" class="quick-action">
            <!-- Mail Icon -->
            <svg
              viewBox="0 0 24 24"
              fill="none"
              stroke="currentColor"
              stroke-width="2"
            >
              <path
                d="M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"
              ></path>
              <polyline points="22,6 12,13 2,6"></polyline>
            </svg>
            <p class="quick-action-title">Contact School</p>
          </a>
        </div>
      </div>
    </div>

    <script>
      // Mobile navigation toggle
      function toggleMobileNav() {
        const nav = document.getElementById("mobileNav");
        nav.classList.toggle("show");
      }

      // Close mobile nav when clicking outside
      document.addEventListener("click", function (event) {
        const navbar = document.querySelector(".navbar");
        const nav = document.getElementById("mobileNav");

        if (!navbar.contains(event.target) && nav.classList.contains("show")) {
          nav.classList.remove("show");
        }
      });

      // Handle window resize
      window.addEventListener("resize", function () {
        const nav = document.getElementById("mobileNav");
        if (window.innerWidth > 768) {
          nav.classList.remove("show");
        }
      });

      // Auto-hide flash messages after 5 seconds
      setTimeout(function () {
        const alerts = document.querySelectorAll(".alert");
        alerts.forEach((alert) => {
          alert.style.opacity = "0";
          alert.style.transform = "translateY(-10px)";
          alert.style.transition = "all 0.5s ease";
          setTimeout(() => alert.remove(), 500);
        });
      }, 5000);

      // Add smooth scroll behavior
      document.documentElement.style.scrollBehavior = "smooth";

      // Add loading states for quick actions
      document
        .querySelectorAll(".quick-action, .btn-primary")
        .forEach((link) => {
          link.addEventListener("click", function (e) {
            if (this.getAttribute("href") === "#") {
              e.preventDefault();
              // Add loading state for demo
              const originalText = this.querySelector(
                ".quick-action-title, span"
              )?.textContent;
              const textElement = this.querySelector(
                ".quick-action-title, span"
              );
              if (textElement) {
                textElement.textContent = "Loading...";
                setTimeout(() => {
                  textElement.textContent = originalText;
                }, 1000);
              }
            }
          });
        });

      // Function to scroll to reports section
      function showReportsSection() {
        const reportsSection = document.querySelector(".dashboard-container");
        if (reportsSection) {
          reportsSection.scrollIntoView({ behavior: "smooth" });

          // Highlight children cards to show where reports can be accessed
          const childItems = document.querySelectorAll(".child-item");
          childItems.forEach((item) => {
            item.style.animation = "pulse 2s ease-in-out";
            setTimeout(() => {
              item.style.animation = "";
            }, 2000);
          });
        }
      }

      // Add pulse animation for highlighting
      const style = document.createElement("style");
      style.textContent = `
        @keyframes pulse {
          0%, 100% { transform: scale(1); }
          50% { transform: scale(1.02); }
        }
      `;
      document.head.appendChild(style);
    </script>
  </body>
</html>
