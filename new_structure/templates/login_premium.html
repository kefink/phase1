<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1.0, user-scalable=yes, maximum-scale=5.0"
    />
    <meta
      name="description"
      content="Login to {{ school_info.school_name or 'Hillview School' }} Management System"
    />
    <meta name="format-detection" content="telephone=no" />
    <meta name="mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="theme-color" content="#667eea" />

    <title>Login - {{ school_info.school_name or 'Hillview School' }}</title>

    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
      tailwind.config = {
        theme: {
          extend: {
            fontFamily: {
              inter: ["Inter", "sans-serif"],
            },
            colors: {
              primary: {
                50: "#f0f4ff",
                100: "#e0e9ff",
                500: "#667eea",
                600: "#5a6fd8",
                700: "#4f5bc5",
                800: "#4347b2",
                900: "#3a3d9e",
              },
              secondary: {
                500: "#764ba2",
                600: "#6a4190",
                700: "#5e377e",
              },
            },
            backdropBlur: {
              xs: "2px",
            },
            animation: {
              float: "float 6s ease-in-out infinite",
              "pulse-slow": "pulse 4s cubic-bezier(0.4, 0, 0.6, 1) infinite",
              "fade-in": "fadeIn 0.8s ease-out",
              "slide-up": "slideUp 0.6s ease-out",
            },
            keyframes: {
              float: {
                "0%, 100%": { transform: "translateY(0px)" },
                "50%": { transform: "translateY(-20px)" },
              },
              fadeIn: {
                "0%": { opacity: "0" },
                "100%": { opacity: "1" },
              },
              slideUp: {
                "0%": { opacity: "0", transform: "translateY(30px)" },
                "100%": { opacity: "1", transform: "translateY(0)" },
              },
            },
          },
        },
      };
    </script>

    <!-- Preconnect for performance -->
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />

    <!-- Modern Fonts -->
    <link
      href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap"
      rel="stylesheet"
    />

    <!-- Icons -->
    <link
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
      rel="stylesheet"
      integrity="sha512-iecdLmaskl7CVkqkXNQ/ZH/XLlvWZOJyj7Yy7tcenmpD1ypASozpmT/E0iPtmFIB46ZmdtAc9eNBvH0H/ZpiBw=="
      crossorigin="anonymous"
      referrerpolicy="no-referrer"
    />

    <style>
      /* Custom glassmorphism effects and animations */
      @keyframes float-bg {
        0%,
        100% {
          transform: translateX(0px) translateY(0px) rotate(0deg);
        }
        33% {
          transform: translateX(30px) translateY(-30px) rotate(120deg);
        }
        66% {
          transform: translateX(-20px) translateY(20px) rotate(240deg);
        }
      }

      .bg-animated::before {
        content: "";
        position: fixed;
        top: -50%;
        left: -50%;
        width: 200%;
        height: 200%;
        background: radial-gradient(
            circle at 20% 80%,
            rgba(120, 119, 198, 0.3) 0%,
            transparent 50%
          ),
          radial-gradient(
            circle at 80% 20%,
            rgba(255, 255, 255, 0.15) 0%,
            transparent 50%
          ),
          radial-gradient(
            circle at 40% 40%,
            rgba(120, 119, 198, 0.2) 0%,
            transparent 50%
          );
        animation: float-bg 20s ease-in-out infinite;
        pointer-events: none;
        z-index: -1;
      }

      .glass-card {
        background: rgba(255, 255, 255, 0.25);
        backdrop-filter: blur(20px);
        border: 1px solid rgba(255, 255, 255, 0.3);
      }

      .glass-card-light {
        background: rgba(255, 255, 255, 0.15);
        backdrop-filter: blur(10px);
        border: 1px solid rgba(255, 255, 255, 0.2);
      }

      .glass-icon {
        background: rgba(255, 255, 255, 0.2);
        backdrop-filter: blur(5px);
        border: 1px solid rgba(255, 255, 255, 0.3);
      }

      .shimmer::before {
        content: "";
        position: absolute;
        top: 0;
        left: -100%;
        width: 100%;
        height: 100%;
        background: linear-gradient(
          90deg,
          transparent,
          rgba(255, 255, 255, 0.1),
          transparent
        );
        transition: left 0.5s;
      }

      .shimmer:hover::before {
        left: 100%;
      }
    </style>
  </head>

  <body
    class="min-h-screen bg-gradient-to-br from-primary-500 via-primary-600 to-secondary-500 font-inter bg-animated"
  >
    <!-- Animated Background Elements -->
    <div class="fixed inset-0 overflow-hidden pointer-events-none">
      <div class="absolute -top-1/2 -left-1/2 w-[200%] h-[200%] opacity-30">
        <div
          class="absolute top-1/4 left-1/4 w-96 h-96 bg-white/10 rounded-full animate-float"
        ></div>
        <div
          class="absolute top-3/4 right-1/4 w-64 h-64 bg-white/5 rounded-full animate-pulse-slow"
        ></div>
        <div
          class="absolute bottom-1/4 left-1/3 w-80 h-80 bg-white/8 rounded-full animate-float"
          style="animation-delay: -2s"
        ></div>
      </div>
    </div>

    <!-- Main Container -->
    <div
      class="relative z-10 min-h-screen flex items-center justify-center p-4 sm:p-6 lg:p-8"
    >
      <div class="w-full max-w-md animate-fade-in">
        <!-- Glassmorphism Container -->
        <div
          class="glass-card rounded-3xl p-8 sm:p-10 shadow-2xl border border-white/20"
        >
          <!-- School Header -->
          <div class="text-center mb-8">
            <!-- Logo -->
            <div class="relative mx-auto mb-6">
              <div
                class="w-20 h-20 mx-auto glass-icon rounded-2xl flex items-center justify-center shadow-lg animate-pulse-slow"
              >
                {% if school_info.logo_url and school_info.logo_url !=
                '/static/images/default_logo.png' %}
                <img
                  src="{{ school_info.logo_url }}"
                  alt="School Logo"
                  class="w-12 h-12 rounded-xl object-cover"
                />
                {% else %}
                <i
                  class="fas fa-graduation-cap text-3xl text-white drop-shadow-lg"
                ></i>
                {% endif %}
              </div>
              <!-- Decorative ring -->
              <div
                class="absolute inset-0 rounded-2xl border-2 border-white/30 animate-pulse-slow"
                style="animation-delay: -1s"
              ></div>
            </div>

            <!-- School Name -->
            <h1
              class="text-3xl sm:text-4xl font-bold text-white mb-3 drop-shadow-lg animate-slide-up"
            >
              {{ school_info.school_name or 'Hillview School' }}
            </h1>

            <!-- Tagline -->
            <p
              class="text-white/90 text-lg font-medium animate-slide-up"
              style="animation-delay: 0.2s"
            >
              {{ school_info.school_motto or 'Excellence Through Knowledge and
              Character' }}
            </p>
          </div>

          <!-- Login Options -->
          <div class="space-y-4 mb-8">
            <!-- Admin Portal -->
            <a
              href="{{ url_for('auth.admin_login') }}"
              class="group block w-full glass-card-light rounded-2xl p-5 hover:bg-white/25 transition-all duration-300 hover:scale-[1.02] hover:shadow-xl shimmer relative overflow-hidden animate-slide-up"
              style="animation-delay: 0.4s"
            >
              <div class="flex items-center space-x-4">
                <div class="flex-shrink-0">
                  <div
                    class="w-14 h-14 bg-gradient-to-br from-purple-500 to-purple-600 rounded-xl flex items-center justify-center shadow-lg group-hover:scale-110 transition-transform duration-300"
                  >
                    <i class="fas fa-user-shield text-xl text-white"></i>
                  </div>
                </div>
                <div class="flex-1 min-w-0">
                  <h3
                    class="text-xl font-bold text-white mb-1 group-hover:text-white transition-colors"
                  >
                    Admin Portal
                  </h3>
                  <p class="text-white/80 text-sm leading-relaxed">
                    Headteacher & Administrative Access
                  </p>
                </div>
                <div class="flex-shrink-0">
                  <i
                    class="fas fa-arrow-right text-white/70 text-lg group-hover:text-white group-hover:translate-x-1 transition-all duration-300"
                  ></i>
                </div>
              </div>
            </a>

            <!-- Class Teacher -->
            <a
              href="{{ url_for('auth.classteacher_login') }}"
              class="group block w-full glass-card-light rounded-2xl p-5 hover:bg-white/25 transition-all duration-300 hover:scale-[1.02] hover:shadow-xl shimmer relative overflow-hidden animate-slide-up"
              style="animation-delay: 0.6s"
            >
              <div class="flex items-center space-x-4">
                <div class="flex-shrink-0">
                  <div
                    class="w-14 h-14 bg-gradient-to-br from-blue-500 to-blue-600 rounded-xl flex items-center justify-center shadow-lg group-hover:scale-110 transition-transform duration-300"
                  >
                    <i class="fas fa-chalkboard-teacher text-xl text-white"></i>
                  </div>
                </div>
                <div class="flex-1 min-w-0">
                  <h3
                    class="text-xl font-bold text-white mb-1 group-hover:text-white transition-colors"
                  >
                    Class Teacher
                  </h3>
                  <p class="text-white/80 text-sm leading-relaxed">
                    Class management, marks upload & reports
                  </p>
                </div>
                <div class="flex-shrink-0">
                  <i
                    class="fas fa-arrow-right text-white/70 text-lg group-hover:text-white group-hover:translate-x-1 transition-all duration-300"
                  ></i>
                </div>
              </div>
            </a>

            <!-- Subject Teacher -->
            <a
              href="{{ url_for('auth.teacher_login') }}"
              class="group block w-full glass-card-light rounded-2xl p-5 hover:bg-white/25 transition-all duration-300 hover:scale-[1.02] hover:shadow-xl shimmer relative overflow-hidden animate-slide-up"
              style="animation-delay: 0.8s"
            >
              <div class="flex items-center space-x-4">
                <div class="flex-shrink-0">
                  <div
                    class="w-14 h-14 bg-gradient-to-br from-emerald-500 to-emerald-600 rounded-xl flex items-center justify-center shadow-lg group-hover:scale-110 transition-transform duration-300"
                  >
                    <i class="fas fa-user-graduate text-xl text-white"></i>
                  </div>
                </div>
                <div class="flex-1 min-w-0">
                  <h3
                    class="text-xl font-bold text-white mb-1 group-hover:text-white transition-colors"
                  >
                    Subject Teacher
                  </h3>
                  <p class="text-white/80 text-sm leading-relaxed">
                    Subject-specific teaching & assessment
                  </p>
                </div>
                <div class="flex-shrink-0">
                  <i
                    class="fas fa-arrow-right text-white/70 text-lg group-hover:text-white group-hover:translate-x-1 transition-all duration-300"
                  ></i>
                </div>
              </div>
            </a>
          </div>

          <!-- Footer -->
          <div
            class="text-center pt-6 border-t border-white/20 animate-slide-up"
            style="animation-delay: 1s"
          >
            <p class="text-white/70 text-sm mb-4">
              © 2025 {{ school_info.school_name or 'Hillview School' }}. All
              rights reserved.
            </p>
            <div class="flex justify-center space-x-6 text-sm">
              <a
                href="#"
                class="text-white/60 hover:text-white transition-colors duration-200"
                >Help</a
              >
              <a
                href="#"
                class="text-white/60 hover:text-white transition-colors duration-200"
                >Support</a
              >
              <a
                href="#"
                class="text-white/60 hover:text-white transition-colors duration-200"
                >Privacy</a
              >
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Enhanced JavaScript -->
    <script>
      // Enhanced loading animation with better UX
      document.querySelectorAll("a[href]").forEach((link) => {
        link.addEventListener("click", function (e) {
          // Add loading state
          this.style.pointerEvents = "none";
          this.style.opacity = "0.8";

          // Create loading indicator
          const loadingDiv = document.createElement("div");
          loadingDiv.className =
            "absolute inset-0 flex items-center justify-center bg-white/10 rounded-2xl backdrop-blur-sm";
          loadingDiv.innerHTML =
            '<div class="w-6 h-6 border-2 border-white/30 border-t-white rounded-full animate-spin"></div>';

          this.style.position = "relative";
          this.appendChild(loadingDiv);

          // Clean up after navigation (fallback)
          setTimeout(() => {
            if (loadingDiv.parentNode) {
              loadingDiv.remove();
              this.style.pointerEvents = "";
              this.style.opacity = "";
            }
          }, 3000);
        });
      });

      // Enhanced keyboard navigation
      document.addEventListener("keydown", function (e) {
        const links = Array.from(document.querySelectorAll("a[href]"));
        const currentIndex = links.indexOf(document.activeElement);

        if (e.key === "ArrowDown" || e.key === "ArrowUp") {
          e.preventDefault();
          const nextIndex =
            e.key === "ArrowDown"
              ? (currentIndex + 1) % links.length
              : (currentIndex - 1 + links.length) % links.length;
          links[nextIndex].focus();
        }

        if (e.key === "Enter" && links.includes(document.activeElement)) {
          document.activeElement.click();
        }
      });

      // Set up keyboard navigation
      document.querySelectorAll("a[href]").forEach((link, index) => {
        link.setAttribute("tabindex", index === 0 ? "0" : "-1");
        link.addEventListener("focus", function () {
          document
            .querySelectorAll("a[href]")
            .forEach((l) => l.setAttribute("tabindex", "-1"));
          this.setAttribute("tabindex", "0");
        });
      });

      // Add subtle parallax effect to background elements
      document.addEventListener("mousemove", function (e) {
        const mouseX = e.clientX / window.innerWidth;
        const mouseY = e.clientY / window.innerHeight;

        document.querySelectorAll(".animate-float").forEach((el, index) => {
          const speed = (index + 1) * 0.5;
          const x = (mouseX - 0.5) * speed;
          const y = (mouseY - 0.5) * speed;
          el.style.transform = `translate(${x}px, ${y}px)`;
        });
      });

      // Add intersection observer for staggered animations
      const observerOptions = {
        threshold: 0.1,
        rootMargin: "0px 0px -50px 0px",
      };

      const observer = new IntersectionObserver((entries) => {
        entries.forEach((entry) => {
          if (entry.isIntersecting) {
            entry.target.style.animationPlayState = "running";
          }
        });
      }, observerOptions);

      document.querySelectorAll(".animate-slide-up").forEach((el) => {
        el.style.animationPlayState = "paused";
        observer.observe(el);
      });

      // Add touch feedback for mobile
      document.querySelectorAll("a[href]").forEach((link) => {
        link.addEventListener("touchstart", function () {
          this.style.transform = "scale(0.98)";
        });

        link.addEventListener("touchend", function () {
          this.style.transform = "";
        });
      });

      // Performance optimization: Reduce animations on low-end devices
      if (navigator.hardwareConcurrency && navigator.hardwareConcurrency < 4) {
        document
          .querySelectorAll(".animate-float, .animate-pulse-slow")
          .forEach((el) => {
            el.style.animation = "none";
          });
      }
    </script>
  </body>
</html>
